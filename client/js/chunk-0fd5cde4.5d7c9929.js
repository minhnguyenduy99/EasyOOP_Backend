(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fd5cde4"],{2909:function(t,e,s){"use strict";s.d(e,"a",(function(){return l}));var n=s("6b75");function a(t){if(Array.isArray(t))return Object(n["a"])(t)}s("a4d3"),s("e01a"),s("d3b7"),s("d28b"),s("3ca3"),s("ddb0"),s("a630");function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=s("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return a(t)||i(t)||Object(o["a"])(t)||r()}},"34cd":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"list-test-table"}},[s("b-table",{ref:"table",attrs:{data:t.tests,paginated:"",hoverable:"","pagination-rounded":"",selected:t.selectedTest,loading:t.loading,"pagination-size":"is-small","per-page":t.itemsPerPage,total:t.totalCount,"backend-pagination":"","row-class":function(t,e){return"is-clickable row--middle"},"backend-sorting":""},on:{"update:selected":function(e){t.selectedTest=e},"page-change":t.$on_pageChanged,click:t.$on_rowClicked,sort:t.$on_sort},scopedSlots:t._u([{key:"empty",fn:function(){return[s("empty-state",{attrs:{"image-src":"https://res.cloudinary.com/dml8e1w0z/image/upload/v1622949906/oop-learning-helper/empty_test_rbkyrn.png",text:"Bạn không có bài test nào"}})]},proxy:!0},{key:"footer",fn:function(){return[s("div",[s("span",{staticClass:"has-text-grey"},[t._v("Số lượng kết quả: ")]),s("span",{staticClass:"has-text-weight-bold"},[t._v(t._s(t.totalCount))])])]},proxy:!0}])},[s("b-table-column",{attrs:{label:"STT",numeric:"",centered:"",width:"20","header-class":"has-text-left"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.index;return[s("strong",[t._v(t._s(n+1))])]}}])}),s("b-table-column",{attrs:{label:"Tên bài test",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("span",{staticClass:"is-size-6"},[t._v(" "+t._s(n.title)+" ")])]}}])}),s("b-table-column",{attrs:{label:"Loại",sortable:"",centered:"",width:"100px",field:"type"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("b-tooltip",{attrs:{label:t.TEST_TYPE[n.type].text,type:"is-black"}},[s("b-icon",{attrs:{icon:t.TEST_TYPE[n.type].icon,type:t.TEST_TYPE[n.type].type}})],1)]}}])}),s("b-table-column",{attrs:{label:"Chủ đề",field:"topic_id",sortable:"",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("span",{staticClass:"has-text-primary-dark"},[t._v(t._s(n.topic.topic_title))])]}}])}),s("b-table-column",{attrs:{label:"Tình trạng",centered:"",sortable:"",width:"120px",field:"available_status"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("b-tag",{attrs:{type:t.TEST_STATUSES[n.available_status].type,size:"is-small"}},[s("span",{staticClass:"has-text-weight-bold is-size-7"},[t._v(t._s(t.TEST_STATUSES[n.available_status].title))])])]}}])}),s("b-table-column",{attrs:{label:"Ngày tạo",sortable:"",centered:"",field:"created_date",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("span",[t._v(" "+t._s(new Date(n.created_date).toLocaleDateString("en-GB"))+" ")])]}}])}),s("b-table-column",{attrs:{visible:t.isRowSelected,label:"Lựa chọn",width:"120px",centered:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t.selectedTestId===n.test_id?[1===n.available_status?s("section",{staticClass:"tooltip-section",staticStyle:{"margin-top":"-4px","margin-bottom":"-6px"}},t._l(t.availableTestFeatureGroups,(function(e,n){return s("b-tooltip",{key:e.id,attrs:{label:e.tooltip,type:e.type}},[e.isLink?s("b-button",{staticClass:"is-icon-button",attrs:{size:"is-small","icon-left":e.icon,tag:"router-link",type:e.type,outlined:e.outlined,to:e.to(t.selectedTest)}}):s("b-button",{staticClass:"is-icon-button",attrs:{size:"is-small","icon-left":e.icon,type:e.type,outlined:e.outlined},on:{click:function(e){return e.stopPropagation(),t.testFeatureHandlers["1"][n](e)}}})],1)})),1):2===n.available_status?s("section",{staticClass:"tooltip-section",staticStyle:{"margin-top":"-4px","margin-bottom":"-6px"}},t._l(t.unavailableTestFeatureGroups,(function(e,n){return s("b-tooltip",{key:e.id,attrs:{label:e.tooltip,type:e.type}},[s("b-button",{staticClass:"is-icon-button",attrs:{size:"is-small","icon-left":e.icon,type:e.type,outlined:e.outlined},on:{click:function(e){return e.stopPropagation(),t.testFeatureHandlers["2"][n](e)}}})],1)})),1):t._e()]:t._e()]}}])})],1)],1)},a=[],i=s("2909"),o=s("1da1"),r=s("5530"),l=(s("96cf"),s("d3b7"),s("3ca3"),s("ddb0"),s("d81d"),s("4de4"),s("2f62")),c=s("ed08"),u={name:"ListTestTable",components:{"empty-state":function(){return s.e("chunk-01f92af0").then(s.bind(null,"86d8"))}},props:{searchOptions:Object},inject:["$api_searchTests"],data:function(){return{TEST_TYPE:[{},{icon:"hourglass-start",text:"Giới hạn thời gian",type:"is-danger"},{icon:"calendar-times",text:"Không giới hạn thời gian",type:"is-primary-light"}],TEST_STATUSES:{1:{icon:"check",type:"is-success",title:"Có sẵn"},2:{type:"is-danger",title:"Đã xóa"}},itemsPerPage:10,totalCount:0,tests:[],selectedTest:null,page:1,featureHandler:[],showModal:!1,loading:!1,openedDetailedRows:[],sortOptions:{sort_by:null,sort_order:null},availableTestFeatureGroups:[{icon:"spell-check",tooltip:"Làm thử",type:"is-success",outlined:!1,isLink:!0,to:function(t){return{name:"TestDetailPage",params:{test_id:t.test_id}}}},{icon:"pen",tooltip:"Chỉnh sửa",type:"is-primary",outlined:!1,isLink:!0,to:function(t){return{name:"EditTest",params:{test_id:t.test_id}}}},{icon:"trash-alt",tooltip:"Xóa",type:"is-danger",outlined:!1,isLink:!1}],unavailableTestFeatureGroups:[{icon:"window-restore",tooltip:"Phục hồi",type:"is-info",outlined:!1,status:0,isLink:!1},{icon:"trash",tooltip:"Xóa vĩnh viễn",type:"is-danger",outlined:!1,status:0,isLink:!1}],testFeatureHandlers:{1:[],2:[]}}},mounted:function(){this.testFeatureHandlers[1].push(null,null,this.$on_deleteButtonClicked),this.testFeatureHandlers[2].push(this.$on_restoreTest,this.$on_deleteTestPermanently),this.$_loadAsyncData()},computed:{selectedTestId:function(){var t;return null===(t=this.selectedTest)||void 0===t?void 0:t.test_id},isRowSelected:function(){return null!==this.selectedTest},_table:function(){return this.$refs.table}},watch:{tests:function(){this.selectedTest=null},searchOptions:function(){this.$_loadAsyncData()}},methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])("TEST",["deleteTestById","restoreTest"])),{},{$on_rowClicked:function(t){this._table.closeDetailRow(t),this.selectedTestId!==t.test_id?this._table.openDetailRow(t):this.selectedTest=null},$on_sort:function(t,e){this.sortOptions.sort_by=t,this.sortOptions.sort_order="asc"===e?1:-1,this.$_loadAsyncData()},$on_pageChanged:function(t){this.page=t,this.$_loadAsyncData()},$on_formSubmitted:function(t){var e=this,s=t.success;s&&(this.showModal=!1,this.$nextTick((function(){e.$_loadAsyncData()})))},$_loadAsyncData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!0,t.$api_searchTests(Object(r["a"])(Object(r["a"])({page:t.page},t.searchOptions),t.sortOptions)).then((function(e){var s=e.error,n=e.data;t.loading=t._searching=!1,t.$_resetTableState(),s||t.$_updateData(n)}));case 2:case"end":return e.stop()}}),e)})))()},$_updateData:function(t){var e,s=t.total_count,n=t.results;this.totalCount=s,this.tests.length=0,(e=this.tests).push.apply(e,Object(i["a"])(n.map((function(t,e){return t.id=e+1,t}))))},$on_editButtonClicked:function(){this.$router.push({name:"EditTest",params:{test_id:this.selectedTest.test_id}})},$on_deleteButtonClicked:function(){var t=this,e=this.selectedTest.test_id;this.deleteTestById({test_id:e}).then((function(e){var s=e.error;s||(c["e"].success(t.$buefy.toast,"Xóa bài test thành công"),t.$_loadAsyncData())}))},$on_navigateTestPage:function(){var t=this.selectedTest.test_id;this.$router.push({name:"TestDetailPage",params:{test_id:t}})},$on_restoreTest:function(){var t=this,e=this.selectedTest.test_id;this.restoreTest({test_id:e}).then((function(e){var s=e.error;s||(c["e"].success(t.$buefy.toast,"Phục hồi thành công"),t.$_loadAsyncData())}))},$on_deleteTestPermanently:function(){var t=this;this.$buefy.dialog.confirm({title:"Xóa bài test",message:"Bạn chắc chắc muốn xóa bài viết ?</br><strong>Bài viết đã xóa sẽ không thể phục hồi</strong>",confirmText:"Đồng ý",cancelText:"Hủy bỏ",type:"is-danger",onConfirm:function(){var e=t.selectedTest.test_id;t.deleteTestById({test_id:e,permanently:!0}).then((function(e){var s=e.error;s||(c["e"].success(t.$buefy.toast,"Xóa bài test thành công"),t.$_loadAsyncData())}))}})},$_resetTableState:function(){this.selectedTest&&this._table.closeDetailRow(this.selectedTest),this.selectedTest=null},$_removeQuestionFromTable:function(t){this.tests=this.tests.filter((function(e){return e.qa_id!==t})),this.totalCount--}})},d=u,p=(s("90b2"),s("2877")),h=Object(p["a"])(d,n,a,!1,null,"79a0826e",null);e["default"]=h.exports},"533b":function(t,e,s){},"90b2":function(t,e,s){"use strict";s("533b")}}]);
//# sourceMappingURL=chunk-0fd5cde4.5d7c9929.js.map