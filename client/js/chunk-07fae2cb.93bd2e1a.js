(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07fae2cb"],{2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("6b75");function a(t){if(Array.isArray(t))return Object(n["a"])(t)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=i("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||s(t)||Object(o["a"])(t)||r()}},6984:function(t,e,i){"use strict";i("7388")},7388:function(t,e,i){},bfd3:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"pending-posts-page"}},[i("admin-content",{attrs:{title:"Bài viết chờ duyệt",icon:"clipboard-check",iconPack:"fas","content-class":"p-0"}},[i("div",{attrs:{id:"page-main-content"}},[i("div",{attrs:{id:"list-pending-post-container"}},[i("div",{staticClass:"px-3 pt-5 pb-3"},[i("post-search",{on:{search:t.$on_search}})],1),i("section",{staticClass:"px-3 py-5"},[i("verification-table",{attrs:{searchOptions:t.searchOptions},on:{selected:t.$on_verificationSelected}})],1)]),i("section",{staticClass:"card",attrs:{id:"verification-detail-section"}},[i("div",{staticClass:"card-content p-0"},[t.selectedVerification?i("b-tabs",{staticClass:"is-paddingless",attrs:{id:"post-detail-tabs",type:"is-toggle"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("b-tab-item",{attrs:{label:"Duyệt"}},[t.loading?i("verification-detail-skeleton"):i("verification-detail",{attrs:{actionHeaderText:"Hành động khác",loading:t.verificationUpdating,verification:t.selectedVerification},on:{update:t.$_updateVerification},scopedSlots:t._u([{key:"actions",fn:function(){return[t.selectedVerification&&2===t.selectedVerification.status?i("div",[i("div",{staticClass:"verification-detail__header"},[i("span",[t._v("Hủy duyệt")]),i("hr")]),i("div",{staticClass:"verification-detail__content"},[i("div",{staticClass:"is-flex is-flex-direction-column ha-vertical-layout-7"},[i("b-button",{attrs:{type:"is-danger",outlined:""},on:{click:t.$on_cancelVerification}},[t._v("Hủy duyệt")])],1)])]):t._e()]},proxy:!0}],null,!1,3727475205)})],1),i("b-tab-item",{attrs:{label:"Bài viết"}},[t.loading?i("verification-post-skeleton"):t.selectedDetailedPost.post_id?i("verification-post",{attrs:{post:t.selectedDetailedPost,editable:t.isPostEditable},on:{preview:function(e){t.showPostModal=!0}}}):i("div",{staticClass:"has-text-centered p-3"},[i("span",{staticClass:"has-text-grey is-size-5"},[t._v("Bài viết đã bị xóa")])])],1),i("b-tab-item",{attrs:{label:"Lịch sử duyệt"}},[t.loading?i("verification-history-skeleton",{attrs:{count:5}}):i("verification-history",{attrs:{verifications:t.historyVerifications}})],1)],1):i("div",{staticClass:"p-3 is-flex is-justify-content-center"},[i("span",{staticClass:"is-size-4 has-text-grey-light has-text-weight-medium"},[t._v("Bạn chưa chọn bài viết")])])],1)])])]),i("b-modal",{attrs:{scroll:"keep"},model:{value:t.showPostModal,callback:function(e){t.showPostModal=e},expression:"showPostModal"}},[i("div",{staticClass:"card is-page-responsive py-6"},[i("post-preview",{attrs:{useUrl:!0,contentUrl:t.selectedDetailedPost.content_file_url}})],1)])],1)},a=[],s=i("5530"),o=(i("d3b7"),i("3ca3"),i("ddb0"),i("2f62")),r=i("e607"),c=i("ed08"),l={name:"PendingPostsPage",components:{VerificationHistorySkeleton:r["b"],VerificationDetailSkeleton:r["a"],VerificationPostSkeleton:r["c"],"admin-content":function(){return i.e("chunk-193a4f2c").then(i.bind(null,"8e2f"))},"verification-table":function(){return i.e("chunk-734d1e7c").then(i.bind(null,"3997"))},"verification-detail":function(){return Promise.all([i.e("chunk-2a303700"),i.e("chunk-932ac754"),i.e("chunk-210ea2fa"),i.e("chunk-072e95f0"),i.e("chunk-0d8dbb40")]).then(i.bind(null,"d84a"))},"verification-post":function(){return i.e("chunk-12382ebe").then(i.bind(null,"0125"))},"verification-history":function(){return i.e("chunk-2d238033").then(i.bind(null,"fe20"))},"post-search":function(){return i.e("chunk-2d0dad06").then(i.bind(null,"6ccf"))},"post-preview":function(){return i.e("chunk-072e95f0").then(i.bind(null,"4625"))}},metaInfo:function(){var t="Bài viết chờ duyệt - ".concat(this.$appConfig.VUE_APP_NAME);return{title:t}},data:function(){return{activeTab:-1,searchOptions:null,selectedVerification:null,searchResult:null,isSearching:!1,showPostModal:!1,detailedPost:null,historyVerifications:[],loading:!1,verificationUpdating:!1}},computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])("AUTH",["activeRole"])),{},{selectedDetailedPost:function(){var t,e;return null!==(t=null===(e=this.selectedVerification)||void 0===e?void 0:e.post)&&void 0!==t?t:{}},isPostEditable:function(){return 0===this.selectedDetailedPost.post_status}}),watch:{activeTab:function(t){2===t&&this.$_requestPostHistory()}},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])("POST",["creator_getVerificationById","creator_getHistoryOfPost","creator_updateVerification","creator_cancelVerification"])),{},{$on_verificationSelected:function(t){var e=this;if(t){this.selectedVerification={},this.loading=!0;var i=t.verification_id;this.creator_getVerificationById({verification_id:i}).then((function(t){var i=t.error,n=t.data;i?e.loading=!1:(e.selectedVerification=n,2===e.activeTab?e.$_requestPostHistory():e.loading=!1)}))}else this.selectedVerification=null},$on_search:function(t){this.searchOptions=t},$on_cancelVerification:function(){var t=this;this.selectedVerification&&this.$buefy.dialog.confirm({title:"Hủy bài duyệt",message:"Bạn chắc chắc muốn hủy bài duyệt này ?</br>Bài duyệt đã hủy sẽ không thể hồi phục",confirmText:"Đồng ý",cancelText:"Hủy bỏ",type:"is-danger",onConfirm:function(){var e=t.selectedVerification.verification_id;t.creator_cancelVerification({verification_id:e}).then((function(e){var i=e.error;i||(c["d"].success(t.$buefy.toast,"Hủy duyệt thành công"),t.searchOptions=null,t.$_resetComponentData())}))}})},$_updateVerification:function(t){var e=this;this.verificationUpdating=!0,this.creator_updateVerification({verification_id:this.selectedVerification.verification_id,data:t}).then((function(t){e.verificationUpdating=!1;var i=t.error;i||c["d"].success(e.$buefy.toast,"Cập nhật thành công")}))},$_requestPostHistory:function(){var t=this,e=this.selectedVerification.post_id;e&&(this.loading=!0,this.historyVerifications.length=0,this.creator_getHistoryOfPost({post_id:e}).then((function(e){t.loading=!1;var i=e.error,n=e.data;i||(t.historyVerifications=n)})))},$_resetComponentData:function(){this.selectedVerification=null,this.historyVerifications.length=0}})},d=l,u=(i("6984"),i("2877")),h=Object(u["a"])(d,n,a,!1,null,"4bd07f47",null);e["default"]=h.exports},e607:function(t,e,i){"use strict";i.d(e,"b",(function(){return l})),i.d(e,"a",(function(){return p})),i.d(e,"c",(function(){return w}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.count,(function(t){return i("div",{key:t,staticClass:"is-fullwidth p-3 is-flex is-justify-content-space-between is-align-items-center"},[i("div",[i("b-skeleton",{attrs:{width:"150px"}}),i("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),i("div",[i("b-skeleton",{attrs:{width:"30px",height:"30px",rounded:""}})],1)])})),0)},a=[],s=(i("a9e3"),{name:"VerificationHistorySkeleton",props:{count:{type:Number,default:function(){return 0}}}}),o=s,r=i("2877"),c=Object(r["a"])(o,n,a,!1,null,null,null),l=c.exports,d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ha-vertical-layout-6 p-3"},[i("div",[i("b-skeleton",{attrs:{width:"100px"}}),i("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),i("div",[i("b-skeleton",{attrs:{width:"150px"}}),i("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),i("div",[i("b-skeleton",{attrs:{width:"80px"}}),i("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),i("div",[i("b-skeleton",{attrs:{width:"150px"}}),i("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),i("div",[i("b-skeleton",{attrs:{width:"150px"}}),i("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),i("div",[i("b-skeleton",{attrs:{width:"150px"}}),i("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),i("div",[i("b-skeleton",{attrs:{width:"100%",height:"20px"}}),i("b-skeleton",{attrs:{width:"80px"}}),i("b-skeleton",{attrs:{width:"100%",height:"120px"}})],1)])},u=[],h={name:"VerificationDetailSkeleton"},f=h,b=Object(r["a"])(f,d,u,!1,null,null,null),p=b.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ha-vertical-layout-7"},[i("b-skeleton",{attrs:{width:"100%",height:"200px"}}),i("div",{staticClass:"p-3 ha-vertical-layout-6"},[i("b-skeleton",{attrs:{width:"100%",height:"30px"}}),i("div",[i("b-skeleton",{attrs:{width:"100px"}}),i("b-skeleton",{attrs:{width:"100%"}})],1),i("div",[i("b-skeleton",{attrs:{width:"100px"}}),i("b-skeleton",{attrs:{width:"100%"}})],1),i("div",[i("b-skeleton",{attrs:{width:"100px"}}),i("div",{staticClass:"is-flex is-align-items-center is-justify-content-flex-start"},[i("div",{staticClass:"mr-2"},[i("b-skeleton",{attrs:{width:"50"}})],1),i("div",{staticClass:"mr-2"},[i("b-skeleton",{attrs:{width:"50"}})],1),i("div",[i("b-skeleton",{attrs:{width:"50"}})],1)])],1),i("div",[i("b-skeleton",{attrs:{width:"100px"}}),i("b-skeleton",{attrs:{width:"100%"}})],1)],1)],1)},y=[],k={name:"VerificationPost"},_=k,g=Object(r["a"])(_,v,y,!1,null,null,null),w=g.exports}}]);
//# sourceMappingURL=chunk-07fae2cb.93bd2e1a.js.map