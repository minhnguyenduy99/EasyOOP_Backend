{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./node_modules/core-js/modules/es.regexp.constructor.js","webpack:///./src/components/post-preview/post-preview-index.vue?121f","webpack:///./src/components/post-preview/post-preview-index.vue?3b38","webpack:///src/components/post-preview/post-preview-index.vue","webpack:///./src/components/post-preview/post-preview-index.vue?4a71","webpack:///./src/components/post-preview/post-preview-index.vue?eb1a"],"names":["redefine","anObject","fails","flags","TO_STRING","RegExpPrototype","RegExp","prototype","nativeToString","NOT_GENERIC","call","source","INCORRECT_NAME","name","R","this","p","String","rf","f","undefined","unsafe","DESCRIPTORS","global","isForced","inheritIfRequired","defineProperty","getOwnPropertyNames","isRegExp","getFlags","stickyHelpers","setInternalState","set","setSpecies","wellKnownSymbol","MATCH","NativeRegExp","re1","re2","CORRECT_NEW","UNSUPPORTED_Y","FORCED","RegExpWrapper","pattern","sticky","thisIsRegExp","patternIsRegExp","flagsAreUndefined","constructor","indexOf","replace","result","proxy","key","configurable","get","it","keys","index","length","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","title","ref","_t","emptyText","_e","staticRenderFns","props","type","required","default","html","allowLevels","anchorClass","data","created","levels","split","map","mounted","indexTree","createIndex","$on_renderIndexTree","watch","val","computed","isIndexTreeEmpty","Object","methods","indexEl","firstChild","removeChild","createHTMLTree","div","innerHTML","children","indexStack","push","list","forEach","headingRegex","test","tagName","childIndexValue","upperIndex","tagType","pop","child","textContent","lineIndex","getAttribute","LINE_MARKUP","childIndex","addNodes","current","indentation","el","text","style","marginLeft","marginBottom","display","classList","add","setAttribute","addEventListener","$refs","appendChild","component"],"mappings":"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","file":"js/chunk-d1e54d2e.46fea4d3.js","sourcesContent":["'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isRegExp = require('../internals/is-regexp');\nvar getFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar setInternalState = require('../internals/internal-state').set;\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar FORCED = DESCRIPTORS && isForced('RegExp', (!CORRECT_NEW || UNSUPPORTED_Y || fails(function () {\n  re2[MATCH] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n})));\n\n// `RegExp` constructor\n// https://tc39.es/ecma262/#sec-regexp-constructor\nif (FORCED) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = this instanceof RegExpWrapper;\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var sticky;\n\n    if (!thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined) {\n      return pattern;\n    }\n\n    if (CORRECT_NEW) {\n      if (patternIsRegExp && !flagsAreUndefined) pattern = pattern.source;\n    } else if (pattern instanceof RegExpWrapper) {\n      if (flagsAreUndefined) flags = getFlags.call(pattern);\n      pattern = pattern.source;\n    }\n\n    if (UNSUPPORTED_Y) {\n      sticky = !!flags && flags.indexOf('y') > -1;\n      if (sticky) flags = flags.replace(/y/g, '');\n    }\n\n    var result = inheritIfRequired(\n      CORRECT_NEW ? new NativeRegExp(pattern, flags) : NativeRegExp(pattern, flags),\n      thisIsRegExp ? this : RegExpPrototype,\n      RegExpWrapper\n    );\n\n    if (UNSUPPORTED_Y && sticky) setInternalState(result, { sticky: sticky });\n\n    return result;\n  };\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n  var keys = getOwnPropertyNames(NativeRegExp);\n  var index = 0;\n  while (keys.length > index) proxy(keys[index++]);\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.es/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./post-preview-index.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"post-preview-index\"},[_c('div',{staticClass:\"mb-4\"},[_c('span',{staticClass:\"is-size-4 has-text-grey has-text-weight-bold\"},[_vm._v(_vm._s(_vm.title))])]),_c('div',{ref:\"index-tree\"}),(_vm.isIndexTreeEmpty)?_c('div',[_vm._t(\"empty-state\",[_c('span',{staticClass:\"is-size-5\"},[_vm._v(_vm._s(_vm.emptyText))])])],2):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"post-preview-index\">\r\n    <div class=\"mb-4\">\r\n      <span class=\"is-size-4 has-text-grey has-text-weight-bold\">{{\r\n        title\r\n      }}</span>\r\n    </div>\r\n    <div ref=\"index-tree\" />\r\n    <div v-if=\"isIndexTreeEmpty\">\r\n      <slot name=\"empty-state\">\r\n        <span class=\"is-size-5\">{{ emptyText }}</span>\r\n      </slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nconst LINE_MARKUP = \"data-v-md-line\";\r\n\r\nexport default {\r\n  name: \"PostPreviewIndex\",\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      required: false,\r\n      default: () => \"Index\"\r\n    },\r\n    html: String,\r\n    allowLevels: {\r\n      type: String,\r\n      default: () => \"h2 h3\"\r\n    },\r\n    emptyText: {\r\n      type: String,\r\n      default: () => \"There is no index set up\"\r\n    },\r\n    anchorClass: {\r\n      type: String,\r\n      default: () => \"index-anchor\"\r\n    }\r\n  },\r\n  data: () => ({\r\n    DEFAULT_INDENTATION: 1,\r\n    indexTree: {},\r\n    levels: []\r\n  }),\r\n  created: function() {\r\n    this.levels = this.allowLevels.split(\" \").map(level => parseInt(level[1]));\r\n  },\r\n  mounted: function() {\r\n    this.indexTree = this.createIndex();\r\n    this.$on_renderIndexTree();\r\n  },\r\n  watch: {\r\n    html(val) {\r\n      if (!val) {\r\n        delete this.indexTree;\r\n        this.indexTree = {};\r\n        return;\r\n      }\r\n      this.indexTree = this.createIndex();\r\n      this.$on_renderIndexTree();\r\n    }\r\n  },\r\n  computed: {\r\n    isIndexTreeEmpty() {\r\n      return Object.keys(this.indexTree).length === 0;\r\n    }\r\n  },\r\n  methods: {\r\n    $on_renderIndexTree() {\r\n      const indexEl = this.$refs[\"index-tree\"];\r\n      while (indexEl.firstChild) {\r\n        indexEl.removeChild(indexEl.firstChild);\r\n      }\r\n      this.createHTMLTree();\r\n    },\r\n    createIndex() {\r\n      const div = document.createElement(\"div\");\r\n      div.innerHTML = this.html;\r\n\r\n      const children = div?.childNodes;\r\n      if (!children) {\r\n        return {};\r\n      }\r\n      let indexStack = [];\r\n      indexStack.push({\r\n        index: 0,\r\n        list: []\r\n      });\r\n      const levelStr = this.levels.reduce((pre, cur) => pre + cur, \"\");\r\n\r\n      const headingRegex = RegExp(`^H[${levelStr}]$`, \"g\");\r\n\r\n      children.forEach(child => {\r\n        const tagName = child?.tagName;\r\n        if (!headingRegex.test(tagName)) {\r\n          return;\r\n        }\r\n        const childIndexValue = parseInt(tagName[1]);\r\n        let upperIndex = indexStack[indexStack.length - 1];\r\n        while (childIndexValue <= upperIndex.tagType && indexStack.length > 1) {\r\n          indexStack.pop();\r\n          upperIndex = indexStack[indexStack.length - 1];\r\n        }\r\n        const childIndex = {\r\n          tagType: childIndexValue,\r\n          title: child.textContent,\r\n          lineIndex: child.getAttribute(LINE_MARKUP),\r\n          list: []\r\n        };\r\n        upperIndex.list.push(childIndex);\r\n        indexStack.push(childIndex);\r\n      });\r\n\r\n      return indexStack[0].list;\r\n    },\r\n    createHTMLTree() {\r\n      this.indexTree.forEach(indexValue => {\r\n        this.addNodes(indexValue);\r\n      });\r\n    },\r\n    addNodes(current) {\r\n      if (!current) {\r\n        return;\r\n      }\r\n      const { tagType, title, list, lineIndex } = current;\r\n      const indentation = this.DEFAULT_INDENTATION * (tagType - this.levels[0]);\r\n      if (indentation < 0) {\r\n        return;\r\n      }\r\n      const el = document.createElement(\"a\");\r\n      el.text = title;\r\n      el.style.marginLeft = `${indentation}rem`;\r\n      el.style.marginBottom = \"8px\";\r\n      el.style.display = \"block\";\r\n      el.classList.add(this.anchorClass);\r\n      el.setAttribute(LINE_MARKUP, lineIndex);\r\n      el.addEventListener(\r\n        \"click\",\r\n        function() {\r\n          this.$emit(\"index-clicked\", lineIndex);\r\n        }.bind(this)\r\n      );\r\n      this.$refs[\"index-tree\"].appendChild(el);\r\n      if (!list || list.length === 0) {\r\n        return;\r\n      }\r\n      list.forEach(val => {\r\n        this.addNodes(val);\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.post-preview-index {\r\n  padding-left: 1.5rem;\r\n  border-left: 10px solid $primary;\r\n}\r\n\r\na.index-anchor {\r\n  font-size: 0.85rem;\r\n  &:hover {\r\n    color: $link;\r\n    font-weight: bold;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./post-preview-index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./post-preview-index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./post-preview-index.vue?vue&type=template&id=2fae0c0e&\"\nimport script from \"./post-preview-index.vue?vue&type=script&lang=js&\"\nexport * from \"./post-preview-index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./post-preview-index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}