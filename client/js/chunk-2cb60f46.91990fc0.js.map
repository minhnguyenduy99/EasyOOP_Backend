{"version":3,"sources":["webpack:///./src/views/admin/tag-management/page.vue?d93d","webpack:///src/views/admin/tag-management/page.vue","webpack:///./src/views/admin/tag-management/page.vue?f698","webpack:///./src/views/admin/tag-management/page.vue?7288","webpack:///./src/views/admin/tag-management/page.vue?9931"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","title","scopedSlots","_u","key","fn","on","$event","openTagForm","_v","proxy","staticClass","nativeOn","type","indexOf","_k","keyCode","$_searchTags","model","value","callback","$$v","tagSearch","expression","questionTags","emptyText","tag","used","$on_selectTag","postTags","$on_tagsCreated","openEditTagForm","selectedTag","$on_tagUpdated","$on_tagDeleted","staticRenderFns","question","post","name","components","metaInfo","inject","data","mounted","methods","console","log","count","errors","length","$_notifyFormSubmitError","$_notifySuccess","$p_loadPage","searchTag","error","$_updateTags","$nextTick","tags","forEach","tag_type","TAG_TYPES","$buefy","notification","open","duration","message","position","hasIcon","$_notifyError","errorMsg","component"],"mappings":"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","file":"js/chunk-2cb60f46.91990fc0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tag-management-page\"}},[_c('admin-content',{attrs:{\"title\":_vm.title,\"icon\":\"tags\",\"iconPack\":\"fas\"},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('b-button',{attrs:{\"icon-left\":\"tag\",\"type\":\"is-primary\",\"outlined\":\"\"},on:{\"click\":function($event){_vm.openTagForm = true}}},[_vm._v(\" Thêm nhãn dán \")])]},proxy:true}])},[_c('div',{staticClass:\"tag-search\"},[_c('b-input',{staticClass:\"tag-search__input is-flex-grow-1\",attrs:{\"icon\":\"search\",\"size\":\"is-medium\",\"placeholder\":\"Tìm kiếm nhãn dán\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.$_searchTags($event)}},model:{value:(_vm.tagSearch),callback:function ($$v) {_vm.tagSearch=$$v},expression:\"tagSearch\"}}),_c('b-button',{staticClass:\"tag-search__submit\",attrs:{\"size\":\"is-medium\",\"type\":\"is-primary\"},on:{\"click\":_vm.$_searchTags}},[_vm._v(\"Tìm kiếm\")])],1),_c('div',{staticClass:\"mt-5 ha-vertical-layout-3\"},[_c('tag-list',{attrs:{\"headerText\":\"Nhãn dán câu hỏi\",\"tags\":_vm.questionTags,\"emptyText\":_vm.emptyText,\"tagButtonType\":function (tag) { return (tag.used ? 'is-danger' : 'is-primary-dark'); }},on:{\"tag-clicked\":_vm.$on_selectTag}}),_c('tag-list',{attrs:{\"headerText\":\"Nhãn dán bài học\",\"tags\":_vm.postTags,\"emptyText\":_vm.emptyText},on:{\"tag-clicked\":_vm.$on_selectTag}})],1)]),_c('b-modal',{model:{value:(_vm.openTagForm),callback:function ($$v) {_vm.openTagForm=$$v},expression:\"openTagForm\"}},[_c('modal-form',{attrs:{\"width\":\"500px\",\"has-card\":true,\"rounded\":\"\",\"title\":\"Tạo nhãn dán\",\"headerClass\":\"has-background-primary-light has-text-white\"}},[_c('tag-form',{on:{\"tags-created\":_vm.$on_tagsCreated}})],1)],1),_c('b-modal',{model:{value:(_vm.openEditTagForm),callback:function ($$v) {_vm.openEditTagForm=$$v},expression:\"openEditTagForm\"}},[_c('edit-tag-form',{attrs:{\"tag\":_vm.selectedTag},on:{\"tag-updated\":_vm.$on_tagUpdated,\"tag-deleted\":_vm.$on_tagDeleted}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"tag-management-page\">\r\n    <admin-content :title=\"title\" icon=\"tags\" iconPack=\"fas\">\r\n      <template #action>\r\n        <b-button\r\n          icon-left=\"tag\"\r\n          type=\"is-primary\"\r\n          outlined\r\n          @click=\"openTagForm = true\"\r\n        >\r\n          Thêm nhãn dán\r\n        </b-button>\r\n      </template>\r\n      <div class=\"tag-search\">\r\n        <b-input\r\n          icon=\"search\"\r\n          size=\"is-medium\"\r\n          class=\"tag-search__input is-flex-grow-1\"\r\n          v-model=\"tagSearch\"\r\n          placeholder=\"Tìm kiếm nhãn dán\"\r\n          @keyup.enter.native=\"$_searchTags\"\r\n        />\r\n        <b-button\r\n          class=\"tag-search__submit\"\r\n          size=\"is-medium\"\r\n          type=\"is-primary\"\r\n          @click=\"$_searchTags\"\r\n          >Tìm kiếm</b-button\r\n        >\r\n      </div>\r\n      <div class=\"mt-5 ha-vertical-layout-3\">\r\n        <tag-list\r\n          headerText=\"Nhãn dán câu hỏi\"\r\n          :tags=\"questionTags\"\r\n          :emptyText=\"emptyText\"\r\n          :tagButtonType=\"tag => (tag.used ? 'is-danger' : 'is-primary-dark')\"\r\n          @tag-clicked=\"$on_selectTag\"\r\n        >\r\n        </tag-list>\r\n        <tag-list\r\n          headerText=\"Nhãn dán bài học\"\r\n          :tags=\"postTags\"\r\n          :emptyText=\"emptyText\"\r\n          @tag-clicked=\"$on_selectTag\"\r\n        />\r\n      </div>\r\n    </admin-content>\r\n    <b-modal v-model=\"openTagForm\">\r\n      <modal-form\r\n        width=\"500px\"\r\n        :has-card=\"true\"\r\n        rounded\r\n        title=\"Tạo nhãn dán\"\r\n        headerClass=\"has-background-primary-light has-text-white\"\r\n      >\r\n        <tag-form @tags-created=\"$on_tagsCreated\" />\r\n      </modal-form>\r\n    </b-modal>\r\n    <b-modal v-model=\"openEditTagForm\">\r\n      <edit-tag-form\r\n        :tag=\"selectedTag\"\r\n        @tag-updated=\"$on_tagUpdated\"\r\n        @tag-deleted=\"$on_tagDeleted\"\r\n      />\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\n\r\nconst TAG_TYPES = {\r\n  question: \"question\",\r\n  post: \"post\"\r\n};\r\n\r\nexport default {\r\n  name: \"TagManagementPage\",\r\n  components: {\r\n    \"admin-content\": () =>\r\n      import(\"../components/admin-content/admin-content.vue\"),\r\n    \"tag-list\": () => import(\"@/components/tag-list.vue\"),\r\n    \"modal-form\": () => import(\"@/components/modal-form.vue\"),\r\n    \"tag-form\": () => import(\"./tag-form.vue\"),\r\n    \"edit-tag-form\": () => import(\"./edit-tag-form\")\r\n  },\r\n  metaInfo() {\r\n    const title = `Quản lí nhãn dán - ${this.$appConfig.VUE_APP_NAME}`;\r\n    return {\r\n      title\r\n    };\r\n  },\r\n  inject: [\"$p_loadPage\"],\r\n  data: () => ({\r\n    title: \"Quản lí nhãn dán\",\r\n    emptyText: \"Không có nhãn dán nào\",\r\n    openTagForm: false,\r\n    openEditTagForm: false,\r\n    tagSearch: \"\",\r\n    questionTags: [],\r\n    postTags: [],\r\n    selectedTag: null\r\n  }),\r\n  mounted: function() {\r\n    this.$_searchTags();\r\n  },\r\n  methods: {\r\n    ...mapActions(\"TAG\", [\"searchTag\", \"findTagById\"]),\r\n\r\n    $on_selectTag(tag) {\r\n      this.openEditTagForm = true;\r\n      this.selectedTag = tag;\r\n    },\r\n\r\n    $on_tagsCreated(data) {\r\n      this.openTagForm = false;\r\n      console.log(data);\r\n      const {\r\n        data: { count, errors = [] }\r\n      } = data;\r\n      this.$_searchTags();\r\n      count > 0 &&\r\n        this.$_notifySuccess(\r\n          `Tạo nhãn dán thành công.</br>Số lượng: <strong>${count}</strong>`\r\n        );\r\n      errors.length > 0 && this.$_notifyFormSubmitError(errors);\r\n    },\r\n\r\n    $on_tagUpdated() {\r\n      this.openEditTagForm = false;\r\n      this.$_notifySuccess(\"Cập nhật nhãn dán thành công\");\r\n      this.$_searchTags();\r\n    },\r\n\r\n    $on_tagDeleted() {\r\n      this.openEditTagForm = false;\r\n      this.$_notifySuccess(\"Xóa nhãn dán thành công\");\r\n      this.$_searchTags();\r\n    },\r\n\r\n    $_searchTags() {\r\n      this.$p_loadPage(true);\r\n      this.searchTag({\r\n        value: this.tagSearch\r\n      }).then(result => {\r\n        const { error, data } = result;\r\n        this.$p_loadPage(false);\r\n        if (error) {\r\n          return;\r\n        }\r\n        this.$_updateTags(data);\r\n      });\r\n    },\r\n\r\n    $_updateTags(tags) {\r\n      this.postTags.length = this.questionTags.length = 0;\r\n      this.postTags = [];\r\n      this.questionTags = [];\r\n      this.$nextTick(() => {\r\n        tags.forEach(tag => {\r\n          tag.tag_type === TAG_TYPES.question && this.questionTags.push(tag);\r\n          tag.tag_type === TAG_TYPES.post && this.postTags.push(tag);\r\n        });\r\n      });\r\n    },\r\n\r\n    $_notifySuccess(message) {\r\n      this.$buefy.notification.open({\r\n        duration: 2000,\r\n        message,\r\n        position: \"is-bottom-right\",\r\n        type: \"is-success\"\r\n      });\r\n    },\r\n\r\n    $_notifyFormSubmitError(errors) {\r\n      errors.forEach(error => {\r\n        this.$buefy.notification.open({\r\n          duration: 2000,\r\n          message: `Tạo nhãn dán thất bại. </br>ID: ${error.tag_id}`,\r\n          position: \"is-bottom-right\",\r\n          type: \"is-danger\",\r\n          hasIcon: true\r\n        });\r\n      });\r\n    },\r\n\r\n    $_notifyError(errorMsg) {\r\n      this.$buefy.notification.open({\r\n        duration: 2000,\r\n        message: errorMsg,\r\n        position: \"is-bottom-right\",\r\n        type: \"is-danger\",\r\n        hasIcon: true\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.tag-search {\r\n  @extend .input-group, .ha-vertical-layout-6;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./page.vue?vue&type=template&id=0bab1d6c&scoped=true&\"\nimport script from \"./page.vue?vue&type=script&lang=js&\"\nexport * from \"./page.vue?vue&type=script&lang=js&\"\nimport style0 from \"./page.vue?vue&type=style&index=0&id=0bab1d6c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bab1d6c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./page.vue?vue&type=style&index=0&id=0bab1d6c&scoped=true&lang=scss&\""],"sourceRoot":""}