{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/views/admin/test-management/list-test-table.vue?c000","webpack:///src/views/admin/test-management/list-test-table.vue","webpack:///./src/views/admin/test-management/list-test-table.vue?82ab","webpack:///./src/views/admin/test-management/list-test-table.vue?79e0","webpack:///./src/views/admin/test-management/list-test-table.vue?1393"],"names":["_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","Object","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","render","_vm","this","_h","$createElement","_c","_self","attrs","ref","tests","selectedTest","loading","itemsPerPage","totalCount","row","index","on","$event","$on_pageChanged","$on_rowClicked","$on_sort","scopedSlots","_u","key","fn","proxy","staticClass","_v","_s","title","TEST_TYPE","type","text","icon","topic","topic_title","TEST_STATUSES","available_status","Date","created_date","toLocaleDateString","isRowSelected","selectedTestId","test_id","staticStyle","_l","feature","id","tooltip","outlined","to","stopPropagation","testFeatureHandlers","_e","staticRenderFns","name","components","props","searchOptions","inject","data","isLink","status","mounted","push","$on_deleteButtonClicked","$_loadAsyncData","computed","_table","$refs","table","watch","methods","closeDetailRow","openDetailRow","sortOptions","sort_by","field","sort_order","order","page","$on_formSubmitted","success","showModal","$nextTick","$_updateData","total_count","length","$on_editButtonClicked","$router","params","deleteTestById","error","$on_navigateTestPage","$on_restoreTest","restoreTest","$on_deleteTestPermanently","$buefy","dialog","confirm","message","confirmText","cancelText","onConfirm","$_resetTableState","$_removeQuestionFromTable","filter","component"],"mappings":"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","file":"js/chunk-0fd5cde4.5d7c9929.js","sourcesContent":["import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"list-test-table\"}},[_c('b-table',{ref:\"table\",attrs:{\"data\":_vm.tests,\"paginated\":\"\",\"hoverable\":\"\",\"pagination-rounded\":\"\",\"selected\":_vm.selectedTest,\"loading\":_vm.loading,\"pagination-size\":\"is-small\",\"per-page\":_vm.itemsPerPage,\"total\":_vm.totalCount,\"backend-pagination\":\"\",\"row-class\":function (row, index) { return 'is-clickable row--middle'; },\"backend-sorting\":\"\"},on:{\"update:selected\":function($event){_vm.selectedTest=$event},\"page-change\":_vm.$on_pageChanged,\"click\":_vm.$on_rowClicked,\"sort\":_vm.$on_sort},scopedSlots:_vm._u([{key:\"empty\",fn:function(){return [_c('empty-state',{attrs:{\"image-src\":\"https://res.cloudinary.com/dml8e1w0z/image/upload/v1622949906/oop-learning-helper/empty_test_rbkyrn.png\",\"text\":\"Bạn không có bài test nào\"}})]},proxy:true},{key:\"footer\",fn:function(){return [_c('div',[_c('span',{staticClass:\"has-text-grey\"},[_vm._v(\"Số lượng kết quả: \")]),_c('span',{staticClass:\"has-text-weight-bold\"},[_vm._v(_vm._s(_vm.totalCount))])])]},proxy:true}])},[_c('b-table-column',{attrs:{\"label\":\"STT\",\"numeric\":\"\",\"centered\":\"\",\"width\":\"20\",\"header-class\":\"has-text-left\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar index = ref.index;\nreturn [_c('strong',[_vm._v(_vm._s(index + 1))])]}}])}),_c('b-table-column',{attrs:{\"label\":\"Tên bài test\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',{staticClass:\"is-size-6\"},[_vm._v(\" \"+_vm._s(row.title)+\" \")])]}}])}),_c('b-table-column',{attrs:{\"label\":\"Loại\",\"sortable\":\"\",\"centered\":\"\",\"width\":\"100px\",\"field\":\"type\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('b-tooltip',{attrs:{\"label\":_vm.TEST_TYPE[row.type].text,\"type\":\"is-black\"}},[_c('b-icon',{attrs:{\"icon\":_vm.TEST_TYPE[row.type].icon,\"type\":_vm.TEST_TYPE[row.type].type}})],1)]}}])}),_c('b-table-column',{attrs:{\"label\":\"Chủ đề\",\"field\":\"topic_id\",\"sortable\":\"\",\"width\":\"150px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',{staticClass:\"has-text-primary-dark\"},[_vm._v(_vm._s(row.topic.topic_title))])]}}])}),_c('b-table-column',{attrs:{\"label\":\"Tình trạng\",\"centered\":\"\",\"sortable\":\"\",\"width\":\"120px\",\"field\":\"available_status\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('b-tag',{attrs:{\"type\":_vm.TEST_STATUSES[row.available_status].type,\"size\":\"is-small\"}},[_c('span',{staticClass:\"has-text-weight-bold is-size-7\"},[_vm._v(_vm._s(_vm.TEST_STATUSES[row.available_status].title))])])]}}])}),_c('b-table-column',{attrs:{\"label\":\"Ngày tạo\",\"sortable\":\"\",\"centered\":\"\",\"field\":\"created_date\",\"width\":\"120px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',[_vm._v(\" \"+_vm._s(new Date(row.created_date).toLocaleDateString(\"en-GB\"))+\" \")])]}}])}),_c('b-table-column',{attrs:{\"visible\":_vm.isRowSelected,\"label\":\"Lựa chọn\",\"width\":\"120px\",\"centered\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(_vm.selectedTestId === row.test_id)?[(row.available_status === 1)?_c('section',{staticClass:\"tooltip-section\",staticStyle:{\"margin-top\":\"-4px\",\"margin-bottom\":\"-6px\"}},_vm._l((_vm.availableTestFeatureGroups),function(feature,index){return _c('b-tooltip',{key:feature.id,attrs:{\"label\":feature.tooltip,\"type\":feature.type}},[(feature.isLink)?_c('b-button',{staticClass:\"is-icon-button\",attrs:{\"size\":\"is-small\",\"icon-left\":feature.icon,\"tag\":\"router-link\",\"type\":feature.type,\"outlined\":feature.outlined,\"to\":feature.to(_vm.selectedTest)}}):_c('b-button',{staticClass:\"is-icon-button\",attrs:{\"size\":\"is-small\",\"icon-left\":feature.icon,\"type\":feature.type,\"outlined\":feature.outlined},on:{\"click\":function($event){$event.stopPropagation();return _vm.testFeatureHandlers['1'][index]($event)}}})],1)}),1):(row.available_status === 2)?_c('section',{staticClass:\"tooltip-section\",staticStyle:{\"margin-top\":\"-4px\",\"margin-bottom\":\"-6px\"}},_vm._l((_vm.unavailableTestFeatureGroups),function(feature,index){return _c('b-tooltip',{key:feature.id,attrs:{\"label\":feature.tooltip,\"type\":feature.type}},[_c('b-button',{staticClass:\"is-icon-button\",attrs:{\"size\":\"is-small\",\"icon-left\":feature.icon,\"type\":feature.type,\"outlined\":feature.outlined},on:{\"click\":function($event){$event.stopPropagation();return _vm.testFeatureHandlers['2'][index]($event)}}})],1)}),1):_vm._e()]:_vm._e()]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"list-test-table\">\r\n    <b-table\r\n      :data=\"tests\"\r\n      paginated\r\n      hoverable\r\n      pagination-rounded\r\n      :selected.sync=\"selectedTest\"\r\n      :loading=\"loading\"\r\n      pagination-size=\"is-small\"\r\n      :per-page=\"itemsPerPage\"\r\n      :total=\"totalCount\"\r\n      backend-pagination\r\n      :row-class=\"(row, index) => 'is-clickable row--middle'\"\r\n      @page-change=\"$on_pageChanged\"\r\n      @click=\"$on_rowClicked\"\r\n      backend-sorting\r\n      @sort=\"$on_sort\"\r\n      ref=\"table\"\r\n    >\r\n      <b-table-column\r\n        label=\"STT\"\r\n        numeric\r\n        centered\r\n        width=\"20\"\r\n        header-class=\"has-text-left\"\r\n      >\r\n        <template v-slot=\"{ index }\">\r\n          <strong>{{ index + 1 }}</strong>\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column label=\"Tên bài test\" width=\"300\" v-slot=\"{ row }\">\r\n        <span class=\"is-size-6\">\r\n          {{ row.title }}\r\n        </span>\r\n      </b-table-column>\r\n\r\n      <b-table-column label=\"Loại\" sortable centered width=\"100px\" field=\"type\">\r\n        <template v-slot=\"{ row }\">\r\n          <b-tooltip :label=\"TEST_TYPE[row.type].text\" type=\"is-black\">\r\n            <b-icon\r\n              :icon=\"TEST_TYPE[row.type].icon\"\r\n              :type=\"TEST_TYPE[row.type].type\"\r\n            />\r\n          </b-tooltip>\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column\r\n        label=\"Chủ đề\"\r\n        field=\"topic_id\"\r\n        v-slot=\"{ row }\"\r\n        sortable\r\n        width=\"150px\"\r\n      >\r\n        <span class=\"has-text-primary-dark\">{{ row.topic.topic_title }}</span>\r\n      </b-table-column>\r\n\r\n      <b-table-column\r\n        label=\"Tình trạng\"\r\n        centered\r\n        sortable\r\n        width=\"120px\"\r\n        field=\"available_status\"\r\n      >\r\n        <template v-slot=\"{ row }\">\r\n          <b-tag\r\n            :type=\"TEST_STATUSES[row.available_status].type\"\r\n            size=\"is-small\"\r\n          >\r\n            <span class=\"has-text-weight-bold is-size-7\">{{\r\n              TEST_STATUSES[row.available_status].title\r\n            }}</span>\r\n          </b-tag>\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column\r\n        label=\"Ngày tạo\"\r\n        v-slot=\"{ row }\"\r\n        sortable\r\n        centered\r\n        field=\"created_date\"\r\n        width=\"120px\"\r\n      >\r\n        <span>\r\n          {{ new Date(row.created_date).toLocaleDateString(\"en-GB\") }}\r\n        </span>\r\n      </b-table-column>\r\n\r\n      <b-table-column\r\n        :visible=\"isRowSelected\"\r\n        label=\"Lựa chọn\"\r\n        width=\"120px\"\r\n        centered\r\n        v-slot=\"{ row }\"\r\n      >\r\n        <template v-if=\"selectedTestId === row.test_id\">\r\n          <section\r\n            v-if=\"row.available_status === 1\"\r\n            class=\"tooltip-section\"\r\n            style=\"margin-top: -4px; margin-bottom: -6px\"\r\n          >\r\n            <b-tooltip\r\n              v-for=\"(feature, index) in availableTestFeatureGroups\"\r\n              :key=\"feature.id\"\r\n              :label=\"feature.tooltip\"\r\n              :type=\"feature.type\"\r\n            >\r\n              <b-button\r\n                v-if=\"feature.isLink\"\r\n                class=\"is-icon-button\"\r\n                size=\"is-small\"\r\n                :icon-left=\"feature.icon\"\r\n                tag=\"router-link\"\r\n                :type=\"feature.type\"\r\n                :outlined=\"feature.outlined\"\r\n                :to=\"feature.to(selectedTest)\"\r\n              />\r\n              <b-button\r\n                v-else\r\n                class=\"is-icon-button\"\r\n                size=\"is-small\"\r\n                :icon-left=\"feature.icon\"\r\n                :type=\"feature.type\"\r\n                :outlined=\"feature.outlined\"\r\n                @click.stop=\"testFeatureHandlers['1'][index]\"\r\n              />\r\n            </b-tooltip>\r\n          </section>\r\n          <section\r\n            v-else-if=\"row.available_status === 2\"\r\n            class=\"tooltip-section\"\r\n            style=\"margin-top: -4px; margin-bottom: -6px\"\r\n          >\r\n            <b-tooltip\r\n              v-for=\"(feature, index) in unavailableTestFeatureGroups\"\r\n              :key=\"feature.id\"\r\n              :label=\"feature.tooltip\"\r\n              :type=\"feature.type\"\r\n            >\r\n              <b-button\r\n                class=\"is-icon-button\"\r\n                size=\"is-small\"\r\n                :icon-left=\"feature.icon\"\r\n                :type=\"feature.type\"\r\n                :outlined=\"feature.outlined\"\r\n                @click.stop=\"testFeatureHandlers['2'][index]\"\r\n              />\r\n            </b-tooltip>\r\n          </section>\r\n        </template>\r\n      </b-table-column>\r\n      <template #empty>\r\n        <empty-state\r\n          image-src=\"https://res.cloudinary.com/dml8e1w0z/image/upload/v1622949906/oop-learning-helper/empty_test_rbkyrn.png\"\r\n          text=\"Bạn không có bài test nào\"\r\n        />\r\n      </template>\r\n\r\n      <template #footer>\r\n        <div>\r\n          <span class=\"has-text-grey\">Số lượng kết quả: </span>\r\n          <span class=\"has-text-weight-bold\">{{ totalCount }}</span>\r\n        </div>\r\n      </template>\r\n    </b-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nimport { ToastNotifier } from \"@/utils\";\r\nexport default {\r\n  name: \"ListTestTable\",\r\n  components: {\r\n    \"empty-state\": () => import(\"@/components/empty-state.vue\")\r\n  },\r\n  props: {\r\n    searchOptions: Object\r\n  },\r\n  inject: [\"$api_searchTests\"],\r\n  data: () => ({\r\n    TEST_TYPE: [\r\n      {},\r\n      {\r\n        icon: \"hourglass-start\",\r\n        text: \"Giới hạn thời gian\",\r\n        type: \"is-danger\"\r\n      },\r\n      {\r\n        icon: \"calendar-times\",\r\n        text: \"Không giới hạn thời gian\",\r\n        type: \"is-primary-light\"\r\n      }\r\n    ],\r\n    TEST_STATUSES: {\r\n      1: {\r\n        icon: \"check\",\r\n        type: \"is-success\",\r\n        title: \"Có sẵn\"\r\n      },\r\n      2: {\r\n        type: \"is-danger\",\r\n        title: \"Đã xóa\"\r\n      }\r\n    },\r\n    itemsPerPage: 10,\r\n    totalCount: 0,\r\n    tests: [],\r\n    selectedTest: null,\r\n    page: 1,\r\n    featureHandler: [],\r\n    showModal: false,\r\n    loading: false,\r\n    openedDetailedRows: [],\r\n    sortOptions: {\r\n      sort_by: null,\r\n      sort_order: null\r\n    },\r\n    availableTestFeatureGroups: [\r\n      {\r\n        icon: \"spell-check\",\r\n        tooltip: \"Làm thử\",\r\n        type: \"is-success\",\r\n        outlined: false,\r\n        isLink: true,\r\n        to: test => ({\r\n          name: \"TestDetailPage\",\r\n          params: { test_id: test.test_id }\r\n        })\r\n      },\r\n      {\r\n        icon: \"pen\",\r\n        tooltip: \"Chỉnh sửa\",\r\n        type: \"is-primary\",\r\n        outlined: false,\r\n        isLink: true,\r\n        to: test => ({\r\n          name: \"EditTest\",\r\n          params: { test_id: test.test_id }\r\n        })\r\n      },\r\n      {\r\n        icon: \"trash-alt\",\r\n        tooltip: \"Xóa\",\r\n        type: \"is-danger\",\r\n        outlined: false,\r\n        isLink: false\r\n      }\r\n    ],\r\n    unavailableTestFeatureGroups: [\r\n      {\r\n        icon: \"window-restore\",\r\n        tooltip: \"Phục hồi\",\r\n        type: \"is-info\",\r\n        outlined: false,\r\n        status: 0,\r\n        isLink: false\r\n      },\r\n      {\r\n        icon: \"trash\",\r\n        tooltip: \"Xóa vĩnh viễn\",\r\n        type: \"is-danger\",\r\n        outlined: false,\r\n        status: 0,\r\n        isLink: false\r\n      }\r\n    ],\r\n    testFeatureHandlers: { 1: [], 2: [] }\r\n  }),\r\n  mounted: function() {\r\n    // features for available test\r\n    this.testFeatureHandlers[1].push(null, null, this.$on_deleteButtonClicked);\r\n    // features for unavailable test)\r\n    this.testFeatureHandlers[2].push(\r\n      this.$on_restoreTest,\r\n      this.$on_deleteTestPermanently\r\n    );\r\n    this.$_loadAsyncData();\r\n  },\r\n  computed: {\r\n    selectedTestId() {\r\n      return this.selectedTest?.test_id;\r\n    },\r\n    isRowSelected() {\r\n      return this.selectedTest !== null;\r\n    },\r\n    _table() {\r\n      return this.$refs.table;\r\n    }\r\n  },\r\n  watch: {\r\n    tests: function() {\r\n      this.selectedTest = null;\r\n    },\r\n    searchOptions() {\r\n      this.$_loadAsyncData();\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(\"TEST\", [\"deleteTestById\", \"restoreTest\"]),\r\n\r\n    $on_rowClicked(row) {\r\n      this._table.closeDetailRow(row);\r\n      if (this.selectedTestId === row.test_id) {\r\n        this.selectedTest = null;\r\n        return;\r\n      }\r\n      this._table.openDetailRow(row);\r\n    },\r\n    $on_sort(field, order) {\r\n      this.sortOptions.sort_by = field;\r\n      this.sortOptions.sort_order = order === \"asc\" ? 1 : -1;\r\n      this.$_loadAsyncData();\r\n    },\r\n    $on_pageChanged(page) {\r\n      this.page = page;\r\n      this.$_loadAsyncData();\r\n    },\r\n    $on_formSubmitted(result) {\r\n      const { success } = result;\r\n      if (!success) {\r\n        return;\r\n      }\r\n      this.showModal = false;\r\n      this.$nextTick(() => {\r\n        this.$_loadAsyncData();\r\n      });\r\n    },\r\n    async $_loadAsyncData() {\r\n      this.loading = true;\r\n      this.$api_searchTests({\r\n        page: this.page,\r\n        ...this.searchOptions,\r\n        ...this.sortOptions\r\n      }).then(result => {\r\n        const { error, data } = result;\r\n        this.loading = this._searching = false;\r\n        this.$_resetTableState();\r\n        if (error) {\r\n          return;\r\n        }\r\n        this.$_updateData(data);\r\n      });\r\n    },\r\n    $_updateData(data) {\r\n      const { total_count, results } = data;\r\n      this.totalCount = total_count;\r\n      this.tests.length = 0;\r\n      this.tests.push(\r\n        ...results.map((result, index) => {\r\n          result.id = index + 1;\r\n          return result;\r\n        })\r\n      );\r\n    },\r\n    $on_editButtonClicked() {\r\n      this.$router.push({\r\n        name: \"EditTest\",\r\n        params: { test_id: this.selectedTest.test_id }\r\n      });\r\n    },\r\n    $on_deleteButtonClicked() {\r\n      const { test_id } = this.selectedTest;\r\n      this.deleteTestById({ test_id }).then(result => {\r\n        const { error } = result;\r\n        if (error) {\r\n          return;\r\n        }\r\n        ToastNotifier.success(this.$buefy.toast, \"Xóa bài test thành công\");\r\n        this.$_loadAsyncData();\r\n      });\r\n    },\r\n    $on_navigateTestPage() {\r\n      const testId = this.selectedTest.test_id;\r\n      this.$router.push({\r\n        name: \"TestDetailPage\",\r\n        params: { test_id: testId }\r\n      });\r\n    },\r\n    $on_restoreTest() {\r\n      const testId = this.selectedTest.test_id;\r\n      this.restoreTest({ test_id: testId }).then(result => {\r\n        const { error } = result;\r\n        if (error) {\r\n          return;\r\n        }\r\n        ToastNotifier.success(this.$buefy.toast, \"Phục hồi thành công\");\r\n        this.$_loadAsyncData();\r\n      });\r\n    },\r\n    $on_deleteTestPermanently() {\r\n      this.$buefy.dialog.confirm({\r\n        title: \"Xóa bài test\",\r\n        message:\r\n          \"Bạn chắc chắc muốn xóa bài viết ?</br><strong>Bài viết đã xóa sẽ không thể phục hồi</strong>\",\r\n        confirmText: \"Đồng ý\",\r\n        cancelText: \"Hủy bỏ\",\r\n        type: \"is-danger\",\r\n        onConfirm: () => {\r\n          const { test_id } = this.selectedTest;\r\n          this.deleteTestById({ test_id, permanently: true }).then(result => {\r\n            const { error } = result;\r\n            if (error) {\r\n              return;\r\n            }\r\n            ToastNotifier.success(this.$buefy.toast, \"Xóa bài test thành công\");\r\n            this.$_loadAsyncData();\r\n          });\r\n        }\r\n      });\r\n    },\r\n    $_resetTableState() {\r\n      if (this.selectedTest) {\r\n        this._table.closeDetailRow(this.selectedTest);\r\n      }\r\n      this.selectedTest = null;\r\n    },\r\n    $_removeQuestionFromTable(questionId) {\r\n      this.tests = this.tests.filter(q => q.qa_id !== questionId);\r\n      this.totalCount--;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.custom-table-header {\r\n  border-top: none;\r\n  border-left: none;\r\n  border-right: none;\r\n}\r\n\r\n.b-table {\r\n  td.chevron-cell {\r\n    width: 50px;\r\n  }\r\n}\r\n\r\n.custom-row-class {\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.tooltip-section {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  .b-tooltip {\r\n    margin-bottom: 0.5rem;\r\n\r\n    &:not(:last-child) {\r\n      margin-right: 0.5rem;\r\n    }\r\n  }\r\n}\r\n\r\n.row--middle {\r\n  vertical-align: middle;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-test-table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-test-table.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list-test-table.vue?vue&type=template&id=79a0826e&scoped=true&\"\nimport script from \"./list-test-table.vue?vue&type=script&lang=js&\"\nexport * from \"./list-test-table.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list-test-table.vue?vue&type=style&index=0&id=79a0826e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"79a0826e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-test-table.vue?vue&type=style&index=0&id=79a0826e&scoped=true&lang=scss&\""],"sourceRoot":""}