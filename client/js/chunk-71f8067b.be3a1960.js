(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71f8067b"],{2909:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("6b75");function s(e){if(Array.isArray(e))return Object(i["a"])(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function a(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var c=n("06c5");function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){return s(e)||a(e)||Object(c["a"])(e)||d()}},"9ec5":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"create-test-page"}},[n("admin-content",{attrs:{title:"Tạo bài test mới",icon:"spell-check",iconPack:"fas"}},[e.test?n("div",[n("div",{attrs:{id:"form-group"}},[n("edit-test-form",{attrs:{formValid:e.areSentencesValid,sentences:e.sentences,test:e.test,updated:e.updated,submitButtonTitle:"Cập nhật"},on:{"update:updated":function(t){e.updated=t}}})],1),n("div",{staticClass:"py-5 ha-vertical-layout-7"},e._l(e.sentences,(function(t,i){return n("test-sentence-editable",{key:t.id,attrs:{order:i,questionTitle:"Câu hỏi",sentence:t,expand:!1,saveOptionTitle:"Thêm",scoreInputPlaceholder:"Điểm"},on:{validated:function(t){return e.$on_sentenceValidatedChanged(i,t)}},scopedSlots:e._u([{key:"add",fn:function(){return[n("div",{staticClass:"buttons"},[n("b-button",{staticClass:"is-icon-button",attrs:{"icon-right":"save",type:"is-primary",size:"is-small"},on:{click:function(t){return e.$on_saveButtonClicked(i)}}})],1)]},proxy:!0}],null,!0)})})),1),n("div",{staticClass:"is-flex is-justify-content-center"},[e.lastPage?e._e():n("b-button",{staticClass:"has-text-weight-bold",attrs:{type:"is-primary-light",loading:e.isLoadingSentences},on:{click:e.$on_loadButtonClicked}},[e._v("Tải thêm")])],1)]):e._e()]),n("backtop",{attrs:{type:"is-primary-light",outlined:""}})],1)},s=[],a=n("2909"),c=n("5530"),d=(n("d3b7"),n("3ca3"),n("ddb0"),n("99af"),n("2f62")),o=n("ed08"),r={name:"TestManagementPage",components:{backtop:function(){return n.e("chunk-9ed9f8b6").then(n.bind(null,"2715"))},"admin-content":function(){return n.e("chunk-193a4f2c").then(n.bind(null,"8e2f"))},"test-sentence-editable":function(){return Promise.all([n.e("chunk-2a303700"),n.e("chunk-932ac754"),n.e("chunk-210ea2fa"),n.e("chunk-072e95f0"),n.e("chunk-335f2942")]).then(n.bind(null,"4e76"))},"edit-test-form":function(){return Promise.all([n.e("chunk-2a303700"),n.e("chunk-932ac754"),n.e("chunk-210ea2fa"),n.e("chunk-072e95f0"),n.e("chunk-1da804a2")]).then(n.bind(null,"e64e"))}},metaInfo:function(){var e,t="".concat(null===(e=this.test)||void 0===e?void 0:e.title," | Cập nhật bài test - ").concat(this.$appConfig.VUE_APP_NAME);return{title:t}},props:{testId:String},data:function(){return{areSentencesValid:!0,sentences:[],valids:[],test:null,page:1,lastPage:!1,updated:!1,isLoadingSentences:!1}},mounted:function(){this.$_getTestById()},methods:Object(c["a"])(Object(c["a"])({},Object(d["b"])("TEST",["updateSentence","createSentence","deleteSentences","getTestById"])),{},{$on_loadButtonClicked:function(){this.$_getTestById()},$on_sentenceValidatedChanged:function(e,t){this.valids[e]=t,t&&this.areSentencesValid||!t&&!this.areSentencesValid||(this.areSentencesValid=-1===this.valids.indexOf(!1))},$on_saveButtonClicked:function(e){var t=this,n=this.sentences[e];this.updateSentence({test_id:this.test.test_id,sentence_id:n.sentence_id,data:n}).then((function(e){var n=e.error;n||(t.updated=!1,o["e"].success(t.$buefy.toast,"Cập nhật câu hỏi thành công"))}))},$_removeSentence:function(e,t){var n=this,i=this.sentences[e],s=i.test_id,a=i.sentence_id;this.deleteSentences({test_id:s,sentencesIds:[a]}).then((function(i){var s=i.error;s||(n.updated=!1,t(e))}))},$_getTestById:function(){var e=this;this.isLoadingSentences=!0,this.getTestById({test_id:this.testId,page:this.page,includeTest:1===this.page}).then((function(t){var n;e.isLoadingSentences=!1;var i=t.error,s=t.data;if(!i){var c=s.test,d=s.results,o=s.page,r=s.page_count;e.test=null!==c&&void 0!==c?c:e.test,(n=e.sentences).push.apply(n,Object(a["a"])(d)),e.lastPage=o===r,e.page++}}))}})},u=r,l=n("2877"),h=Object(l["a"])(u,i,s,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-71f8067b.be3a1960.js.map