{"version":3,"sources":["webpack:///./src/views/admin/components/post-form/post-template-groups.vue?3a64","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/views/admin/components/post-form/post-template-groups.vue?8296","webpack:///src/views/admin/components/post-form/post-template-groups.vue","webpack:///./src/views/admin/components/post-form/post-template-groups.vue?20ec","webpack:///./src/views/admin/components/post-form/post-template-groups.vue?7d43"],"names":["$","$find","find","addToUnscopables","FIND","SKIPS_HOLES","Array","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","model","value","callback","$$v","showTestTemplate","expression","class","testTemplate","on","$event","$on_testDeleted","scopedSlots","_u","key","fn","ref","add","filteredTests","$m_findTests","$on_testSelected","proxy","option","_s","title","sentence_count","searchTests","_e","staticRenderFns","name","components","mixins","props","templates","provide","$api_searchTests","viewer_searchTest","bind","data","mounted","watch","val","$_resetTestTemplate","$emit","methods","selectedTestIds","indexOf","selectedTest","test_id","data_title","data_link","push","addHandler","splice","index","type","template_data","component"],"mappings":"kHAAA,W,oCCCA,IAAIA,EAAI,EAAQ,QACZC,EAAQ,EAAQ,QAAgCC,KAChDC,EAAmB,EAAQ,QAE3BC,EAAO,OACPC,GAAc,EAGdD,IAAQ,IAAIE,MAAM,GAAGF,IAAM,WAAcC,GAAc,KAI3DL,EAAE,CAAEO,OAAQ,QAASC,OAAO,EAAMC,OAAQJ,GAAe,CACvDH,KAAM,SAAcQ,GAClB,OAAOT,EAAMU,KAAMD,EAAYE,UAAUC,OAAS,EAAID,UAAU,QAAKE,MAKzEX,EAAiBC,I,yCCpBjB,IAAIW,EAAS,WAAa,IAAIC,EAAIL,KAASM,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,KAAK,CAACE,YAAY,2BAA2B,CAACL,EAAIM,GAAG,mBAAmBH,EAAG,MAAM,CAACE,YAAY,iCAAiC,CAACF,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,cAAcC,MAAM,CAACC,MAAOT,EAAoB,iBAAEU,SAAS,SAAUC,GAAMX,EAAIY,iBAAiBD,GAAKE,WAAW,qBAAqB,CAACV,EAAG,OAAO,CAACW,MAAM,CACjf,uBAAwBd,EAAIY,iBAC5B,mBAAoBZ,EAAIY,mBACvB,CAACZ,EAAIM,GAAG,8BAA8B,KAAKH,EAAG,KAAK,CAACE,YAAY,eAAgBL,EAAoB,iBAAEG,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,gBAAgB,CAACI,MAAM,CAAC,SAAWP,EAAIe,aAAa,iBAAmB,mBAAmB,eAAiB,eAAe,cAAgB,YAAY,eAAiB,MAAM,cAAgB,gBAAgB,oBAAsB,gBAAgB,sBAAwB,cAAcC,GAAG,CAAC,kBAAkB,SAASC,GAAQjB,EAAIe,aAAaE,GAAQ,QAAUjB,EAAIkB,iBAAiBC,YAAYnB,EAAIoB,GAAG,CAAC,CAACC,IAAI,MAAMC,GAAG,SAASC,GAC9iB,IAAIC,EAAMD,EAAIC,IAC1B,MAAO,CAACrB,EAAG,iBAAiB,CAACE,YAAY,OAAOE,MAAM,CAAC,kBAAkB,GAAG,KAAOP,EAAIyB,cAAc,YAAc,oBAAoB,KAAO,SAAS,UAAY,GAAG,MAAQ,MAAMT,GAAG,CAAC,OAAShB,EAAI0B,aAAa,OAAS,SAAST,GAAQ,OAAOjB,EAAI2B,iBAAiBV,EAAQO,KAAOL,YAAYnB,EAAIoB,GAAG,CAAC,CAACC,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACtB,EAAIM,GAAG,4BAA4BsB,OAAM,GAAM,CAACP,IAAI,UAAUC,GAAG,SAASC,GAC5Y,IAAIM,EAASN,EAAIM,OAC7B,MAAO,CAAC1B,EAAG,MAAM,CAACE,YAAY,oCAAoC,CAACF,EAAG,OAAO,CAACE,YAAY,wBAAwB,CAACL,EAAIM,GAAGN,EAAI8B,GAAGD,EAAOE,UAAU5B,EAAG,OAAO,CAACE,YAAY,2BAA2B,CAACL,EAAIM,GAAG,qBAAqBN,EAAI8B,GAAGD,EAAOG,yBAAyB,MAAK,GAAMxB,MAAM,CAACC,MAAOT,EAAe,YAAEU,SAAS,SAAUC,GAAMX,EAAIiC,YAAYtB,GAAKE,WAAW,qBAAqB,MAAK,EAAM,eAAe,GAAGb,EAAIkC,UAC7ZC,EAAkB,G,8GCyDtB,GACEC,KAAM,qBACNC,WAAY,CACV,gBAAiB,WAArB,OACA,kDAEEC,OAAQ,CAAC,EAAX,MACEC,MAAO,CACLC,UAAWlD,OAEbmD,QAVF,WAWI,MAAO,CACLC,iBAAkB/C,KAAKgD,kBAAkBC,KAAKjD,QAGlDkD,KAAM,WAAR,OACA,oBACA,eACA,mBACA,cACA,YACA,SACA,SACA,oBAGEC,QAAS,WAAX,SACA,2DACA,uCACA,YAAM,MAAN,oBAEInD,KAAKiB,oBAAsBjB,KAAK6C,YAApC,2DAEEO,MAAO,CACLnC,iBADJ,SACA,GACM,IAAKoC,EAGH,OAFArD,KAAKsD,2BACLtD,KAAKuD,MAAM,mBAAoB,IAGjC,IAAN,sBACMvD,KAAKuD,MAAM,mBAAoBV,KAGnCW,QAAS,OAAX,OAAW,CAAX,kBACA,qDADA,IAGIxB,iBAHJ,SAGA,KACM,IAA4D,IAAxDhC,KAAKyD,gBAAgBC,QAAQC,EAAaC,SAA9C,CADN,IAKA,sBACA,GACQC,WAAYzB,EACZ0B,UAAW,GAAnB,0DAEM9D,KAAKyD,gBAAgBM,KAAKH,GAChC,OAAMI,QAAN,iBATQ,EAAR,uDAYIzC,gBAjBJ,SAiBA,KACMvB,KAAKyD,gBAAgBQ,OAAOC,EAAO,IAGrCZ,oBArBJ,kBAsBatD,KAAKoB,aACZpB,KAAKoB,aAAe,CAClB+C,KAAM,OACN/B,MAAO,GACPjB,MAAO,GACPiD,cAAe,IAEjBpE,KAAKyD,gBAAgBvD,OAAS,MC1IuW,I,wBCQvYmE,EAAY,eACd,EACAjE,EACAoC,GACA,EACA,KACA,WACA,MAIa,aAAA6B,E","file":"js/chunk-d1110d1a.e1b767ab.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./post-template-groups.vue?vue&type=style&index=0&id=03e27abb&scoped=true&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"post-template-groups\"},[_c('div',[_c('div',{staticClass:\"ha-vertical-layout-7\"},[_c('h1',{staticClass:\"is-size-5 has-text-grey\"},[_vm._v(\"Thêm template\")]),_c('div',{staticClass:\"template-options-switch-group\"},[_c('b-switch',{attrs:{\"type\":\"is-primary\"},model:{value:(_vm.showTestTemplate),callback:function ($$v) {_vm.showTestTemplate=$$v},expression:\"showTestTemplate\"}},[_c('span',{class:{\n              'has-text-weight-bold': _vm.showTestTemplate,\n              'has-text-primary': _vm.showTestTemplate\n            }},[_vm._v(\"Template của bài test\")])])],1)]),_c('hr',{staticClass:\"is-hr my-2\"}),(_vm.showTestTemplate)?_c('div',{staticClass:\"py-4\"},[_c('test-template',{attrs:{\"template\":_vm.testTemplate,\"headerTitleLabel\":\"Tiêu đề template\",\"testTitleLabel\":\"Tên bài test\",\"testLinkLabel\":\"Đường dẫn\",\"saveButtonText\":\"Lưu\",\"addButtonText\":\"Thêm bài test\",\"testLinkPlaceholder\":\"Link bài test\",\"inputTitlePlaceHolder\":\"Tên button\"},on:{\"update:template\":function($event){_vm.testTemplate=$event},\"deleted\":_vm.$on_testDeleted},scopedSlots:_vm._u([{key:\"add\",fn:function(ref){\n            var add = ref.add;\nreturn [_c('b-autocomplete',{staticClass:\"mb-5\",attrs:{\"clear-on-select\":\"\",\"data\":_vm.filteredTests,\"placeholder\":\"Nhập tên bài test\",\"icon\":\"search\",\"clearable\":\"\",\"field\":\"id\"},on:{\"typing\":_vm.$m_findTests,\"select\":function($event){return _vm.$on_testSelected($event, add)}},scopedSlots:_vm._u([{key:\"empty\",fn:function(){return [_vm._v(\"Không tìm thấy kết quả\")]},proxy:true},{key:\"default\",fn:function(ref){\n            var option = ref.option;\nreturn [_c('div',{staticClass:\"is-flex is-flex-direction-column\"},[_c('span',{staticClass:\"has-text-weight-bold\"},[_vm._v(_vm._s(option.title))]),_c('span',{staticClass:\"is-size-7 has-text-grey\"},[_vm._v(\"Số lượng câu hỏi: \"+_vm._s(option.sentence_count))])])]}}],null,true),model:{value:(_vm.searchTests),callback:function ($$v) {_vm.searchTests=$$v},expression:\"searchTests\"}})]}}],null,false,2401999903)})],1):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"post-template-groups\">\r\n    <div>\r\n      <div class=\"ha-vertical-layout-7\">\r\n        <h1 class=\"is-size-5 has-text-grey\">Thêm template</h1>\r\n        <div class=\"template-options-switch-group\">\r\n          <b-switch v-model=\"showTestTemplate\" type=\"is-primary\">\r\n            <span\r\n              :class=\"{\r\n                'has-text-weight-bold': showTestTemplate,\r\n                'has-text-primary': showTestTemplate\r\n              }\"\r\n              >Template của bài test</span\r\n            >\r\n          </b-switch>\r\n        </div>\r\n      </div>\r\n      <hr class=\"is-hr my-2\" />\r\n      <div v-if=\"showTestTemplate\" class=\"py-4\">\r\n        <test-template\r\n          :template.sync=\"testTemplate\"\r\n          headerTitleLabel=\"Tiêu đề template\"\r\n          testTitleLabel=\"Tên bài test\"\r\n          testLinkLabel=\"Đường dẫn\"\r\n          saveButtonText=\"Lưu\"\r\n          addButtonText=\"Thêm bài test\"\r\n          testLinkPlaceholder=\"Link bài test\"\r\n          inputTitlePlaceHolder=\"Tên button\"\r\n          @deleted=\"$on_testDeleted\"\r\n        >\r\n          <template #add=\"{ add }\">\r\n            <b-autocomplete\r\n              class=\"mb-5\"\r\n              clear-on-select\r\n              v-model=\"searchTests\"\r\n              :data=\"filteredTests\"\r\n              placeholder=\"Nhập tên bài test\"\r\n              icon=\"search\"\r\n              clearable\r\n              field=\"id\"\r\n              @typing=\"$m_findTests\"\r\n              @select=\"$on_testSelected($event, add)\"\r\n            >\r\n              <template #empty>Không tìm thấy kết quả</template>\r\n              <template #default=\"{ option }\">\r\n                <div class=\"is-flex is-flex-direction-column\">\r\n                  <span class=\"has-text-weight-bold\">{{ option.title }}</span>\r\n                  <span class=\"is-size-7 has-text-grey\"\r\n                    >Số lượng câu hỏi: {{ option.sentence_count }}</span\r\n                  >\r\n                </div>\r\n              </template>\r\n            </b-autocomplete>\r\n          </template>\r\n        </test-template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { FindTestsMixin } from \"./mixins\";\r\nimport { mapActions } from \"vuex\";\r\nimport { ToastNotifier } from \"@/utils\";\r\n\r\nexport default {\r\n  name: \"PostTemplateGroups\",\r\n  components: {\r\n    \"test-template\": () =>\r\n      import(\"@/components/post-preview/post-template/test-template.vue\")\r\n  },\r\n  mixins: [FindTestsMixin],\r\n  props: {\r\n    templates: Array\r\n  },\r\n  provide() {\r\n    return {\r\n      $api_searchTests: this.viewer_searchTest.bind(this)\r\n    };\r\n  },\r\n  data: () => ({\r\n    showTestTemplate: false,\r\n    searchTests: \"\",\r\n    selectedTestIds: [],\r\n    testTemplate: {\r\n      type: \"test\",\r\n      title: \"\",\r\n      class: \"\",\r\n      template_data: []\r\n    }\r\n  }),\r\n  mounted: function() {\r\n    this.templates?.length > 0 &&\r\n      (this.testTemplate = this.templates.find(\r\n        template => template.type === \"test\"\r\n      ));\r\n    this.showTestTemplate = !!(this.templates && this.templates?.length > 0);\r\n  },\r\n  watch: {\r\n    showTestTemplate(val) {\r\n      if (!val) {\r\n        this.$_resetTestTemplate();\r\n        this.$emit(\"update:templates\", []);\r\n        return;\r\n      }\r\n      const templates = [this.testTemplate];\r\n      this.$emit(\"update:templates\", templates);\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(\"VIEWER_TEST\", [\"viewer_searchTest\"]),\r\n\r\n    $on_testSelected(selectedTest, addHandler) {\r\n      if (this.selectedTestIds.indexOf(selectedTest.test_id) !== -1) {\r\n        ToastNotifier.error(this.$buefy.toast, \"Bài test đã được chọn\");\r\n        return;\r\n      }\r\n      const { test_id, title } = selectedTest;\r\n      const templateData = {\r\n        data_title: title,\r\n        data_link: `${this.$appConfig.VUE_APP_HOST}/tests/${test_id}`\r\n      };\r\n      this.selectedTestIds.push(test_id);\r\n      addHandler?.(templateData);\r\n    },\r\n\r\n    $on_testDeleted(test, index) {\r\n      this.selectedTestIds.splice(index, 1);\r\n    },\r\n\r\n    $_resetTestTemplate() {\r\n      delete this.testTemplate;\r\n      this.testTemplate = {\r\n        type: \"test\",\r\n        title: \"\",\r\n        class: \"\",\r\n        template_data: []\r\n      };\r\n      this.selectedTestIds.length = 0;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.template-options-switch-group {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  > * {\r\n    margin: 0 1rem 0.25rem 0;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./post-template-groups.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./post-template-groups.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./post-template-groups.vue?vue&type=template&id=03e27abb&scoped=true&\"\nimport script from \"./post-template-groups.vue?vue&type=script&lang=js&\"\nexport * from \"./post-template-groups.vue?vue&type=script&lang=js&\"\nimport style0 from \"./post-template-groups.vue?vue&type=style&index=0&id=03e27abb&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"03e27abb\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}