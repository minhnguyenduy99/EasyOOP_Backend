{"version":3,"sources":["webpack:///./src/views/admin/components/verification/mixins/verification-style.mixin.js","webpack:///./src/views/admin/components/verification/mixins/base-verification-table.mixin.js","webpack:///./src/views/admin/post-verification/verification-table.vue?6eef","webpack:///src/views/admin/post-verification/verification-table.vue","webpack:///./src/views/admin/post-verification/verification-table.vue?d99f","webpack:///./src/views/admin/post-verification/verification-table.vue"],"names":["data","VERIFICATION_STATUS_STYLES","0","type","text","1","2","3","VERIFICATION_TYPE_STYLES","page","totalCount","verifications","itemsPerPage","sorter","sort_by","order","selectedVerification","watch","val","this","$emit","computed","selectedVerificationId","verification_id","isRowSelected","isTableEmpty","length","methods","$m_updateTableData","results","push","map","result","index","id","$m_removeVerificationFromTable","verificationId","filter","ver","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","loading","row","on","$event","$on_pageChanged","$on_sort","$on_rowClicked","scopedSlots","_u","key","fn","proxy","_v","_s","ref","post_title","status","Date","last_edited_date","toLocaleDateString","staticRenderFns","name","components","mixins","props","searchOptions","Object","default","mounted","$_loadAsyncData","field","sort_order","manager_findVerifications","search","then","error","component"],"mappings":"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","file":"js/chunk-3ac66150.c0aa1491.js","sourcesContent":["export default {\r\n  data: () => ({\r\n    VERIFICATION_STATUS_STYLES: {\r\n      0: {\r\n        type: \"is-danger\",\r\n        text: \"Không được duyệt\"\r\n      },\r\n      1: {\r\n        type: \"is-success\",\r\n        text: \"Đã duyệt\"\r\n      },\r\n      2: {\r\n        type: \"is-primary\",\r\n        text: \"Đang chờ\"\r\n      },\r\n      3: {\r\n        type: \"is-light\",\r\n        text: \"Đã hủy\"\r\n      }\r\n    },\r\n    VERIFICATION_TYPE_STYLES: {\r\n      1: {\r\n        type: \"is-primary\",\r\n        text: \"Duyệt tạo\"\r\n      },\r\n      2: {\r\n        type: \"is-primary\",\r\n        text: \"Duyệt cập nhật\"\r\n      },\r\n      3: {\r\n        type: \"is-danger\",\r\n        text: \"Duyệt xóa\"\r\n      }\r\n    }\r\n    // STATUS_BASED_ACTIONS: [\r\n    //   {\r\n    //     order: 0,\r\n    //     icon: \"eye\",\r\n    //     tooltip: \"Xem trước\",\r\n    //     type: \"is-primary\",\r\n    //     outlined: true,\r\n    //     roles: [\"creator\", \"manager\"],\r\n    //     statuses: [1, 2]\r\n    //   },\r\n    //   {\r\n    //     order: 1,\r\n    //     icon: \"minus-circle\",\r\n    //     tooltip: \"Hủy\",\r\n    //     type: \"is-danger\",\r\n    //     outlined: false,\r\n    //     roles: [\"creator\"],\r\n    //     statuses: [2]\r\n    //   },\r\n    //   {\r\n    //     order: 2,\r\n    //     icon: \"check\",\r\n    //     tooltip: \"Duyệt\",\r\n    //     type: \"is-success\",\r\n    //     outlined: false,\r\n    //     roles: [\"manager\"],\r\n    //     statuses: [2]\r\n    //   },\r\n    //   {\r\n    //     order: 3,\r\n    //     icon: \"ban\",\r\n    //     tooltip: \"Không duyệt\",\r\n    //     type: \"is-danger\",\r\n    //     outlined: false,\r\n    //     roles: [\"manager\"],\r\n    //     statuses: [2]\r\n    //   }\r\n    // ]\r\n  })\r\n};\r\n","export default {\r\n  data: () => ({\r\n    page: 1,\r\n    totalCount: 0,\r\n    verifications: [],\r\n    itemsPerPage: 6,\r\n    sorter: {\r\n      sort_by: \"created_date\",\r\n      order: -1\r\n    },\r\n    selectedVerification: null\r\n  }),\r\n  watch: {\r\n    selectedVerification(val) {\r\n      this.$emit(\"selected\", val);\r\n    },\r\n    verifications: function() {\r\n      this.selectedVerification = null;\r\n    }\r\n  },\r\n  computed: {\r\n    selectedVerificationId() {\r\n      return this.selectedVerification?.verification_id;\r\n    },\r\n    isRowSelected() {\r\n      return this.selectedVerification !== null;\r\n    },\r\n    isTableEmpty() {\r\n      return this.verifications.length === 0;\r\n    }\r\n  },\r\n  methods: {\r\n    $m_updateTableData(totalCount, results) {\r\n      this.totalCount = totalCount;\r\n      this.verifications.length = 0;\r\n      this.verifications.push(\r\n        ...results.map((result, index) => {\r\n          result.id = index + 1;\r\n          return result;\r\n        })\r\n      );\r\n    },\r\n    $m_removeVerificationFromTable(verificationId) {\r\n      this.verifications = this.verifications.filter(\r\n        ver => ver.verification_id !== verificationId\r\n      );\r\n      this.totalCount--;\r\n    }\r\n  }\r\n};\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"verification-table\"},[_c('b-table',{attrs:{\"data\":_vm.verifications,\"paginated\":!_vm.isTableEmpty,\"hoverable\":\"\",\"pagination-rounded\":\"\",\"selected\":_vm.selectedVerification,\"is-row-selectable\":function () { return true; },\"loading\":_vm.loading,\"pagination-size\":\"is-small\",\"per-page\":_vm.itemsPerPage,\"total\":_vm.totalCount,\"backend-pagination\":\"\",\"row-class\":function (row, index) { return 'is-clickable row--middle'; },\"backend-sorting\":\"\"},on:{\"update:selected\":function($event){_vm.selectedVerification=$event},\"page-change\":_vm.$on_pageChanged,\"sort\":_vm.$on_sort,\"click\":_vm.$on_rowClicked},scopedSlots:_vm._u([{key:\"empty\",fn:function(){return [_c('empty-state',{attrs:{\"image-src\":\"https://res.cloudinary.com/dml8e1w0z/image/upload/v1618931250/oop-learning-helper/post_empty_state_xcrbog.png\",\"text\":\"Bạn không có bài duyệt nào\"}})]},proxy:true},(!_vm.isTableEmpty)?{key:\"footer\",fn:function(){return [_c('div',[_c('span',{staticClass:\"has-text-grey\"},[_vm._v(\"Số lượng kết quả: \")]),_c('span',{staticClass:\"has-text-weight-bold\"},[_vm._v(_vm._s(_vm.totalCount))])])]},proxy:true}:null],null,true)},[_c('b-table-column',{attrs:{\"label\":\"STT\",\"width\":\"40\",\"numeric\":\"\",\"centered\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('strong',[_vm._v(_vm._s(row.id))])]}}])}),_c('b-table-column',{attrs:{\"label\":\"Tên bài viết\",\"width\":\"250\",\"cell-class\":\"is-align-items-center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(row.post_title)+\" \")]}}])}),_c('b-table-column',{attrs:{\"label\":\"Tình trạng\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar status = ref.row.status;\nreturn [[_c('b-tag',{staticClass:\"has-text-weight-bold\",attrs:{\"size\":\"is-small\",\"type\":_vm.VERIFICATION_STATUS_STYLES[status].type}},[_vm._v(\" \"+_vm._s(_vm.VERIFICATION_STATUS_STYLES[status].text)+\" \")])]]}}])}),_c('b-table-column',{attrs:{\"field\":\"last_edited_date\",\"label\":\"Ngày cập nhật\",\"width\":\"130\",\"numeric\":\"\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(new Date(row.last_edited_date).toLocaleDateString(\"en-GB\"))+\" \")]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"verification-table\">\r\n    <b-table\r\n      :data=\"verifications\"\r\n      :paginated=\"!isTableEmpty\"\r\n      hoverable\r\n      pagination-rounded\r\n      :selected.sync=\"selectedVerification\"\r\n      :is-row-selectable=\"() => true\"\r\n      :loading=\"loading\"\r\n      pagination-size=\"is-small\"\r\n      :per-page=\"itemsPerPage\"\r\n      :total=\"totalCount\"\r\n      backend-pagination\r\n      :row-class=\"(row, index) => 'is-clickable row--middle'\"\r\n      backend-sorting\r\n      @page-change=\"$on_pageChanged\"\r\n      @sort=\"$on_sort\"\r\n      @click=\"$on_rowClicked\"\r\n    >\r\n      <b-table-column label=\"STT\" width=\"40\" numeric centered>\r\n        <template v-slot=\"{ row }\">\r\n          <strong>{{ row.id }}</strong>\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column\r\n        label=\"Tên bài viết\"\r\n        width=\"250\"\r\n        v-slot=\"{ row }\"\r\n        cell-class=\"is-align-items-center\"\r\n      >\r\n        {{ row.post_title }}\r\n      </b-table-column>\r\n\r\n      <b-table-column\r\n        label=\"Tình trạng\"\r\n        width=\"100\"\r\n        v-slot=\"{ row: { status } }\"\r\n      >\r\n        <template>\r\n          <b-tag\r\n            size=\"is-small\"\r\n            :type=\"VERIFICATION_STATUS_STYLES[status].type\"\r\n            class=\"has-text-weight-bold\"\r\n          >\r\n            {{ VERIFICATION_STATUS_STYLES[status].text }}\r\n          </b-tag>\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column\r\n        field=\"last_edited_date\"\r\n        label=\"Ngày cập nhật\"\r\n        width=\"130\"\r\n        numeric\r\n        v-slot=\"{ row }\"\r\n        sortable\r\n      >\r\n        {{ new Date(row.last_edited_date).toLocaleDateString(\"en-GB\") }}\r\n      </b-table-column>\r\n\r\n      <template #empty>\r\n        <empty-state\r\n          image-src=\"https://res.cloudinary.com/dml8e1w0z/image/upload/v1618931250/oop-learning-helper/post_empty_state_xcrbog.png\"\r\n          text=\"Bạn không có bài duyệt nào\"\r\n        />\r\n      </template>\r\n      <template v-if=\"!isTableEmpty\" #footer>\r\n        <div>\r\n          <span class=\"has-text-grey\">Số lượng kết quả: </span>\r\n          <span class=\"has-text-weight-bold\">{{ totalCount }}</span>\r\n        </div>\r\n      </template>\r\n    </b-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nimport {\r\n  VerificationStyleMixin,\r\n  BaseVerificationTableMixin\r\n} from \"../components/verification/mixins\";\r\n\r\nexport default {\r\n  name: \"VerificationTable\",\r\n  components: {\r\n    \"empty-state\": () => import(\"@/components/empty-state.vue\")\r\n  },\r\n  mixins: [BaseVerificationTableMixin, VerificationStyleMixin],\r\n  props: {\r\n    searchOptions: {\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  },\r\n  data: () => ({\r\n    loading: false\r\n  }),\r\n  mounted: function() {\r\n    this.$_loadAsyncData();\r\n  },\r\n  watch: {\r\n    searchOptions(val) {\r\n      this.page = 1;\r\n      this.$_loadAsyncData(val);\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(\"POST\", [\"manager_findVerifications\"]),\r\n\r\n    $on_rowClicked(row) {\r\n      if (row.verification_id === this.selectedVerificationId) {\r\n        this.selectedVerification = null;\r\n      }\r\n    },\r\n    $on_pageChanged(page) {\r\n      this.page = page;\r\n      this.$emit(\"pageChanged\", page);\r\n      this.$_loadAsyncData({ sort: true });\r\n    },\r\n    $on_sort(field, order) {\r\n      this.sorter[\"sort_by\"] = field;\r\n      this.sorter.sort_order = order;\r\n      this.$_loadAsyncData({ sort: true });\r\n    },\r\n    $_loadAsyncData(options = {}) {\r\n      this.loading = true;\r\n      const { sort = false } = options;\r\n      let search = {\r\n        ...this.searchOptions,\r\n        ...(sort && this.sorter),\r\n        page: this.page\r\n      };\r\n      this.manager_findVerifications(search).then(result => {\r\n        this.loading = false;\r\n        const { error, data } = result;\r\n        if (error) {\r\n          return;\r\n        }\r\n        const { results, total_count } = data;\r\n        this.$m_updateTableData(total_count, results);\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./verification-table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./verification-table.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./verification-table.vue?vue&type=template&id=259de41c&\"\nimport script from \"./verification-table.vue?vue&type=script&lang=js&\"\nexport * from \"./verification-table.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}