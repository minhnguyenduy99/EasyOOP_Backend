{"version":3,"sources":["webpack:///./src/views/admin/list-posts/post-table.vue?a460","webpack:///./src/views/admin/list-posts/consts.js","webpack:///src/views/admin/list-posts/post-table.vue","webpack:///./src/views/admin/list-posts/post-table.vue?3819","webpack:///./src/views/admin/list-posts/post-table.vue?63b3","webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/views/admin/list-posts/post-table.vue?4f11"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","posts","selectedPost","loading","itemsPerPage","totalCount","row","index","on","$event","onPageChanged","onSort","onRowClicked","scopedSlots","_u","key","fn","proxy","staticClass","_v","_s","ref","id","$_getPostDetailView","post_id","post_title","topic_title","_l","tags","slice","tag","tag_value","length","_e","created_date","toLocaleDateString","isRowSelected","selectedPostId","staticStyle","feature","tooltip","type","icon","outlined","stopPropagation","postFeatureHandler","model","value","callback","$$v","showModal","expression","fileContentUrl","staticRenderFns","POST_STATUSES","NONE","status","title","ACTIVE","PENDING_CREATE","PENDING_UPDATE","PENDING_DELETE","name","components","props","filter","Object","default","search","Boolean","inject","prop","event","data","created","push","values","forEach","$_loadAsyncData","computed","_search","get","set","$emit","val","watch","newVal","methods","page","sorter","field","sort_order","order","$_updateData","total_count","onViewButtonClicked","onEditPostButtonClicked","$router","params","onDeleteButtonClicked","postId","$buefy","dialog","confirm","message","confirmText","cancelText","onConfirm","setTimeout","$_removePostFromTable","component","redefine","anObject","fails","flags","TO_STRING","RegExpPrototype","RegExp","prototype","nativeToString","NOT_GENERIC","call","source","INCORRECT_NAME","R","p","String","rf","f","undefined","unsafe","_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread"],"mappings":"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","file":"js/chunk-76777a38.50141bd6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"dashboard-post-table\"}},[_c('b-table',{attrs:{\"data\":_vm.posts,\"paginated\":\"\",\"hoverable\":\"\",\"pagination-rounded\":\"\",\"selected\":_vm.selectedPost,\"is-row-selectable\":function () { return true; },\"loading\":_vm.loading,\"pagination-size\":\"is-small\",\"per-page\":_vm.itemsPerPage,\"total\":_vm.totalCount,\"backend-pagination\":\"\",\"row-class\":function (row, index) { return 'is-clickable row--middle'; },\"backend-sorting\":\"\"},on:{\"update:selected\":function($event){_vm.selectedPost=$event},\"page-change\":_vm.onPageChanged,\"sort\":_vm.onSort,\"click\":_vm.onRowClicked},scopedSlots:_vm._u([{key:\"empty\",fn:function(){return [_c('empty-state',{attrs:{\"image-src\":\"https://res.cloudinary.com/dml8e1w0z/image/upload/v1618931250/oop-learning-helper/post_empty_state_xcrbog.png\",\"text\":\"Không có bài viết nào\"}})]},proxy:true},{key:\"footer\",fn:function(){return [_c('div',[_c('span',{staticClass:\"has-text-grey\"},[_vm._v(\"Số lượng kết quả: \")]),_c('span',{staticClass:\"has-text-weight-bold\"},[_vm._v(_vm._s(_vm.totalCount))])])]},proxy:true}])},[_c('b-table-column',{attrs:{\"label\":\"ID\",\"width\":\"40\",\"numeric\":\"\",\"centered\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('strong',[_vm._v(_vm._s(row.id))])]}}])}),_c('b-table-column',{attrs:{\"label\":\"Tên bài viết\",\"width\":\"300\",\"cell-class\":\"is-align-items-center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('router-link',{attrs:{\"to\":_vm.$_getPostDetailView(row.post_id)}},[_vm._v(\" \"+_vm._s(row.post_title)+\" \")])]}}])}),_c('b-table-column',{attrs:{\"label\":\"Chủ đề\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(row.topic_title)+\" \")]}}])}),_c('b-table-column',{attrs:{\"label\":\"Nhãn dán\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('b-taglist',[_vm._l((row.tags.slice(0, 2)),function(tag){return _c('b-tag',{key:tag.id,staticClass:\"is-tag\",attrs:{\"type\":\"is-primary-dark\",\"size\":\"is-small\"}},[_vm._v(_vm._s(tag.tag_value))])}),(row.tags.length > 2)?_c('b-tag',{attrs:{\"type\":\"is-primary-dark\"}},[_vm._v(\" ... \")]):_vm._e()],2)]}}])}),_c('b-table-column',{attrs:{\"field\":\"created_date\",\"label\":\"Ngày tạo\",\"width\":\"100\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(row.created_date.toLocaleDateString(\"en-GB\"))+\" \")]}}])}),_c('b-table-column',{attrs:{\"visible\":_vm.isRowSelected,\"label\":\"\",\"width\":\"auto\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(_vm.selectedPostId === row.id)?[_c('section',{staticClass:\"tooltip-section\",staticStyle:{\"margin-top\":\"-4px\",\"margin-bottom\":\"-6px\"}},_vm._l((_vm.postFeatures),function(feature,index){return _c('b-tooltip',{key:feature.id,attrs:{\"label\":feature.tooltip,\"type\":feature.type}},[_c('b-button',{attrs:{\"size\":\"is-small\",\"icon-left\":feature.icon,\"type\":feature.type,\"outlined\":feature.outlined,\"rounded\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.postFeatureHandler[index]($event)}}})],1)}),1)]:_vm._e()]}}])})],1),_c('b-modal',{attrs:{\"scroll\":\"keep\"},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_c('div',{staticClass:\"card is-page-responsive py-6\"},[_c('post-preview',{attrs:{\"useUrl\":true,\"contentUrl\":_vm.fileContentUrl}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const POST_STATUSES = {\r\n  NONE: {\r\n    status: -1,\r\n    title: \"Chọn tất cả\"\r\n  },\r\n  ACTIVE: {\r\n    status: 0,\r\n    title: \"Đã duyệt\",\r\n    icon: \"check\",\r\n    type: \"is-success\"\r\n  },\r\n  PENDING_CREATE: {\r\n    status: 1,\r\n    title: \"Duyệt tạo\",\r\n    icon: \"circle\",\r\n    type: \"is-danger\"\r\n  },\r\n  PENDING_UPDATE: {\r\n    status: 2,\r\n    title: \"Duyệt cập nhật\",\r\n    icon: \"circle\",\r\n    type: \"is-danger\"\r\n  },\r\n  PENDING_DELETE: {\r\n    status: 3,\r\n    title: \"Duyệt xóa\",\r\n    icon: \"circle\",\r\n    type: \"is-danger\"\r\n  }\r\n};\r\n","<template>\r\n  <div id=\"dashboard-post-table\">\r\n    <b-table\r\n      :data=\"posts\"\r\n      paginated\r\n      hoverable\r\n      pagination-rounded\r\n      :selected.sync=\"selectedPost\"\r\n      :is-row-selectable=\"() => true\"\r\n      :loading=\"loading\"\r\n      pagination-size=\"is-small\"\r\n      :per-page=\"itemsPerPage\"\r\n      :total=\"totalCount\"\r\n      backend-pagination\r\n      :row-class=\"(row, index) => 'is-clickable row--middle'\"\r\n      @page-change=\"onPageChanged\"\r\n      backend-sorting\r\n      @sort=\"onSort\"\r\n      @click=\"onRowClicked\"\r\n    >\r\n      <b-table-column label=\"ID\" width=\"40\" numeric centered>\r\n        <template v-slot=\"{ row }\">\r\n          <strong>{{ row.id }}</strong>\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column\r\n        label=\"Tên bài viết\"\r\n        width=\"300\"\r\n        v-slot=\"{ row }\"\r\n        cell-class=\"is-align-items-center\"\r\n      >\r\n        <router-link :to=\"$_getPostDetailView(row.post_id)\">\r\n          {{ row.post_title }}\r\n        </router-link>\r\n      </b-table-column>\r\n\r\n      <b-table-column label=\"Chủ đề\" width=\"200\" v-slot=\"{ row }\">\r\n        {{ row.topic_title }}\r\n      </b-table-column>\r\n\r\n      <b-table-column label=\"Nhãn dán\" width=\"300\">\r\n        <template v-slot=\"{ row }\">\r\n          <b-taglist>\r\n            <b-tag\r\n              class=\"is-tag\"\r\n              v-for=\"tag in row.tags.slice(0, 2)\"\r\n              :key=\"tag.id\"\r\n              type=\"is-primary-dark\"\r\n              size=\"is-small\"\r\n              >{{ tag.tag_value }}</b-tag\r\n            >\r\n            <b-tag v-if=\"row.tags.length > 2\" type=\"is-primary-dark\">\r\n              ...\r\n            </b-tag>\r\n          </b-taglist>\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column\r\n        field=\"created_date\"\r\n        label=\"Ngày tạo\"\r\n        width=\"100\"\r\n        v-slot=\"{ row }\"\r\n        sortable\r\n      >\r\n        {{ row.created_date.toLocaleDateString(\"en-GB\") }}\r\n      </b-table-column>\r\n\r\n      <!-- <b-table-column\r\n        field=\"post_status\"\r\n        label=\"Tình trạng\"\r\n        width=\"100\"\r\n        sortable\r\n      >\r\n        <template v-slot=\"{ row }\">\r\n          <div class=\"is-flex is-flex-direction-column is-align-items-center\">\r\n            <b-icon\r\n              :icon=\"postStatuses[row.post_status].icon\"\r\n              :type=\"postStatuses[row.post_status].type\"\r\n              size=\"is-small\"\r\n            />\r\n            <span class=\"is-size-7 has-text-weight-bold mt-2\">{{\r\n              postStatuses[row.post_status].title\r\n            }}</span>\r\n          </div>\r\n        </template>\r\n      </b-table-column> -->\r\n\r\n      <b-table-column\r\n        :visible=\"isRowSelected\"\r\n        label=\"\"\r\n        width=\"auto\"\r\n        v-slot=\"{ row }\"\r\n      >\r\n        <template v-if=\"selectedPostId === row.id\">\r\n          <section\r\n            class=\"tooltip-section\"\r\n            style=\"margin-top: -4px; margin-bottom: -6px\"\r\n          >\r\n            <b-tooltip\r\n              v-for=\"(feature, index) in postFeatures\"\r\n              :key=\"feature.id\"\r\n              :label=\"feature.tooltip\"\r\n              :type=\"feature.type\"\r\n            >\r\n              <b-button\r\n                size=\"is-small\"\r\n                :icon-left=\"feature.icon\"\r\n                :type=\"feature.type\"\r\n                :outlined=\"feature.outlined\"\r\n                rounded\r\n                @click.stop=\"postFeatureHandler[index]\"\r\n              />\r\n            </b-tooltip>\r\n          </section>\r\n        </template>\r\n      </b-table-column>\r\n      <template #empty>\r\n        <empty-state\r\n          image-src=\"https://res.cloudinary.com/dml8e1w0z/image/upload/v1618931250/oop-learning-helper/post_empty_state_xcrbog.png\"\r\n          text=\"Không có bài viết nào\"\r\n        />\r\n      </template>\r\n      <template #footer>\r\n        <div>\r\n          <span class=\"has-text-grey\">Số lượng kết quả: </span>\r\n          <span class=\"has-text-weight-bold\">{{ totalCount }}</span>\r\n        </div>\r\n      </template>\r\n    </b-table>\r\n    <b-modal v-model=\"showModal\" scroll=\"keep\">\r\n      <div class=\"card is-page-responsive py-6\">\r\n        <post-preview :useUrl=\"true\" :contentUrl=\"fileContentUrl\" />\r\n      </div>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ToastNotifier } from \"../../../utils\";\r\nimport { POST_STATUSES } from \"./consts\";\r\n\r\nexport default {\r\n  name: \"PostTable\",\r\n  components: {\r\n    \"post-preview\": async () => (await import(\"@/components\")).PostPreview,\r\n    \"empty-state\": () => import(\"@/components/empty-state.vue\")\r\n  },\r\n  props: {\r\n    filter: {\r\n      type: Object,\r\n      default: () => null\r\n    },\r\n    search: {\r\n      type: Boolean,\r\n      default: () => false\r\n    }\r\n  },\r\n  inject: [\"findPosts\", \"deletePost\"],\r\n  model: {\r\n    prop: \"search\",\r\n    event: \"table-search\"\r\n  },\r\n  data: () => ({\r\n    itemsPerPage: 6,\r\n    totalCount: 0,\r\n    posts: [],\r\n    postStatusIcons: {},\r\n    postFeatures: [\r\n      {\r\n        icon: \"eye\",\r\n        tooltip: \"Xem\",\r\n        type: \"is-primary\",\r\n        outlined: true\r\n      },\r\n      {\r\n        icon: \"pen\",\r\n        tooltip: \"Chỉnh sửa\",\r\n        type: \"is-primary\",\r\n        outlined: true\r\n      },\r\n      {\r\n        icon: \"trash-alt\",\r\n        tooltip: \"Xóa bài viết\",\r\n        type: \"is-danger\",\r\n        outlined: false\r\n      }\r\n    ],\r\n    sorter: {\r\n      sort_by: \"time\",\r\n      order: -1\r\n    },\r\n    page: 1,\r\n    postFeatureHandler: [],\r\n    showModal: false,\r\n    selectedPost: null,\r\n    loading: false,\r\n    postStatuses: {}\r\n  }),\r\n  created: function() {\r\n    this.postFeatureHandler.push(\r\n      this.onViewButtonClicked,\r\n      this.onEditPostButtonClicked,\r\n      this.onDeleteButtonClicked\r\n    );\r\n    Object.values(POST_STATUSES).forEach(status => {\r\n      this.postStatuses[status.status.toString()] = {\r\n        title: status.title,\r\n        icon: status.icon,\r\n        type: status.type\r\n      };\r\n    });\r\n    this.$_loadAsyncData();\r\n  },\r\n  computed: {\r\n    selectedPostId() {\r\n      return this.selectedPost?.id;\r\n    },\r\n    isRowSelected() {\r\n      return this.selectedPost !== null;\r\n    },\r\n    _search: {\r\n      get() {\r\n        return this.search;\r\n      },\r\n      set(val) {\r\n        this.$emit(\"table-search\", val);\r\n      }\r\n    },\r\n    fileContentUrl() {\r\n      return this.selectedPost?.content_file_url ?? null;\r\n    }\r\n  },\r\n  watch: {\r\n    search: function(newVal, oldVal) {\r\n      if (newVal) {\r\n        this.$_loadAsyncData();\r\n        return;\r\n      }\r\n    },\r\n    posts: function() {\r\n      this.selectedPost = null;\r\n    }\r\n  },\r\n  methods: {\r\n    onRowClicked(row) {\r\n      if (row.id === this.selectedPostId) {\r\n        this.selectedPost = null;\r\n      }\r\n    },\r\n    onPageChanged(page) {\r\n      this.page = page;\r\n      this.$_loadAsyncData();\r\n    },\r\n    onSort(field, order) {\r\n      this.sorter[\"sort_by\"] = field;\r\n      this.sorter.sort_order = order;\r\n      this.$_loadAsyncData();\r\n    },\r\n    async $_loadAsyncData() {\r\n      this.loading = true;\r\n      let searchOptions = {\r\n        ...this.filter,\r\n        post_status: \"0\",\r\n        ...this.sorter\r\n      };\r\n      this.findPosts({\r\n        page: this.page,\r\n        searchOptions: searchOptions\r\n      }).then(result => {\r\n        const { error, data } = result;\r\n        this.loading = false;\r\n        this._search = false;\r\n        if (error) {\r\n          return;\r\n        }\r\n        this.$_updateData(data);\r\n      });\r\n    },\r\n    $_updateData(data) {\r\n      const { total_count, results } = data;\r\n      this.totalCount = total_count;\r\n      this.posts.length = 0;\r\n      this.posts.push(\r\n        ...results.map((result, index) => {\r\n          result.id = index + 1;\r\n          result.created_date = new Date(result.created_date);\r\n          return result;\r\n        })\r\n      );\r\n    },\r\n    onViewButtonClicked() {\r\n      this.showModal = true;\r\n    },\r\n    onEditPostButtonClicked() {\r\n      this.$router.push({\r\n        name: \"EditPost\",\r\n        params: { post_id: this.selectedPost.post_id }\r\n      });\r\n    },\r\n    onDeleteButtonClicked() {\r\n      const postId = this.selectedPost?.post_id;\r\n      if (!postId) {\r\n        return;\r\n      }\r\n      this.$buefy.dialog.confirm({\r\n        title: \"Xóa bài viết\",\r\n        message: \"Bạn chắc chắc muốn xóa bài viết ?\",\r\n        confirmText: \"Đồng ý\",\r\n        cancelText: \"Hủy bỏ\",\r\n        type: \"is-danger\",\r\n        onConfirm: () => {\r\n          setTimeout(\r\n            function() {\r\n              this.loading = true;\r\n              this.deletePost(postId).then(result => {\r\n                const { error } = result;\r\n                this.loading = false;\r\n                if (error) {\r\n                  ToastNotifier.error(\r\n                    this.$buefy.toast,\r\n                    \"Xóa bài viết thất bại\"\r\n                  );\r\n                  return;\r\n                }\r\n                ToastNotifier.success(\r\n                  this.$buefy.toast,\r\n                  \"Xóa bài viết thành công\"\r\n                );\r\n                this.$_loadAsyncData();\r\n              });\r\n            }.bind(this),\r\n            500\r\n          );\r\n        }\r\n      });\r\n    },\r\n    $_removePostFromTable(postId) {\r\n      this.posts = this.posts.filter(post => post.post_id !== postId);\r\n      this.totalCount--;\r\n    },\r\n    $_getPostDetailView(postId) {\r\n      return {\r\n        name: \"AdminPostDetail\",\r\n        params: {\r\n          post_id: postId\r\n        }\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.custom-table-header {\r\n  border-top: none;\r\n  border-left: none;\r\n  border-right: none;\r\n}\r\n\r\n.b-table {\r\n  tr {\r\n    th.checkbox-cell {\r\n      background: $grey-lighter;\r\n    }\r\n  }\r\n}\r\n\r\n.custom-row-class {\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.tooltip-section {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  .b-tooltip {\r\n    margin-bottom: 0.5rem;\r\n\r\n    &:not(:last-child) {\r\n      margin-right: 0.5rem;\r\n    }\r\n  }\r\n}\r\n\r\n.is-vertical-middle {\r\n  vertical-align: middle;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./post-table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./post-table.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./post-table.vue?vue&type=template&id=b5f43bf2&scoped=true&\"\nimport script from \"./post-table.vue?vue&type=script&lang=js&\"\nexport * from \"./post-table.vue?vue&type=script&lang=js&\"\nimport style0 from \"./post-table.vue?vue&type=style&index=0&id=b5f43bf2&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b5f43bf2\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./post-table.vue?vue&type=style&index=0&id=b5f43bf2&scoped=true&lang=scss&\""],"sourceRoot":""}