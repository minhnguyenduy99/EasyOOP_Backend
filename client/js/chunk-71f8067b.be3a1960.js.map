{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/views/admin/edit-test/page.vue?9d3f","webpack:///src/views/admin/edit-test/page.vue","webpack:///./src/views/admin/edit-test/page.vue?a726","webpack:///./src/views/admin/edit-test/page.vue"],"names":["_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","Object","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","render","_vm","this","_h","$createElement","_c","_self","attrs","areSentencesValid","sentences","test","updated","on","$event","staticClass","_l","sentence","index","key","id","$on_sentenceValidatedChanged","scopedSlots","_u","fn","$on_saveButtonClicked","proxy","lastPage","_e","isLoadingSentences","$on_loadButtonClicked","_v","staticRenderFns","name","components","backtop","metaInfo","title","props","testId","String","data","mounted","$_getTestById","methods","valids","valid","indexOf","updateSentence","test_id","sentence_id","error","$_removeSentence","deleteSentences","sentencesIds","removeHandler","getTestById","page","includeTest","component"],"mappings":"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","file":"js/chunk-71f8067b.be3a1960.js","sourcesContent":["import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"create-test-page\"}},[_c('admin-content',{attrs:{\"title\":\"Tạo bài test mới\",\"icon\":\"spell-check\",\"iconPack\":\"fas\"}},[(_vm.test)?_c('div',[_c('div',{attrs:{\"id\":\"form-group\"}},[_c('edit-test-form',{attrs:{\"formValid\":_vm.areSentencesValid,\"sentences\":_vm.sentences,\"test\":_vm.test,\"updated\":_vm.updated,\"submitButtonTitle\":\"Cập nhật\"},on:{\"update:updated\":function($event){_vm.updated=$event}}})],1),_c('div',{staticClass:\"py-5 ha-vertical-layout-7\"},_vm._l((_vm.sentences),function(sentence,index){return _c('test-sentence-editable',{key:sentence.id,attrs:{\"order\":index,\"questionTitle\":\"Câu hỏi\",\"sentence\":sentence,\"expand\":false,\"saveOptionTitle\":\"Thêm\",\"scoreInputPlaceholder\":\"Điểm\"},on:{\"validated\":function($event){return _vm.$on_sentenceValidatedChanged(index, $event)}},scopedSlots:_vm._u([{key:\"add\",fn:function(){return [_c('div',{staticClass:\"buttons\"},[_c('b-button',{staticClass:\"is-icon-button\",attrs:{\"icon-right\":\"save\",\"type\":\"is-primary\",\"size\":\"is-small\"},on:{\"click\":function($event){return _vm.$on_saveButtonClicked(index)}}})],1)]},proxy:true}],null,true)})}),1),_c('div',{staticClass:\"is-flex is-justify-content-center\"},[(!_vm.lastPage)?_c('b-button',{staticClass:\"has-text-weight-bold\",attrs:{\"type\":\"is-primary-light\",\"loading\":_vm.isLoadingSentences},on:{\"click\":_vm.$on_loadButtonClicked}},[_vm._v(\"Tải thêm\")]):_vm._e()],1)]):_vm._e()]),_c('backtop',{attrs:{\"type\":\"is-primary-light\",\"outlined\":\"\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"create-test-page\">\r\n    <admin-content title=\"Tạo bài test mới\" icon=\"spell-check\" iconPack=\"fas\">\r\n      <div v-if=\"test\">\r\n        <div id=\"form-group\">\r\n          <edit-test-form\r\n            :formValid=\"areSentencesValid\"\r\n            :sentences=\"sentences\"\r\n            :test=\"test\"\r\n            :updated.sync=\"updated\"\r\n            submitButtonTitle=\"Cập nhật\"\r\n          />\r\n        </div>\r\n        <div class=\"py-5 ha-vertical-layout-7\">\r\n          <test-sentence-editable\r\n            v-for=\"(sentence, index) in sentences\"\r\n            :key=\"sentence.id\"\r\n            :order=\"index\"\r\n            questionTitle=\"Câu hỏi\"\r\n            :sentence=\"sentence\"\r\n            :expand=\"false\"\r\n            saveOptionTitle=\"Thêm\"\r\n            scoreInputPlaceholder=\"Điểm\"\r\n            @validated=\"$on_sentenceValidatedChanged(index, $event)\"\r\n          >\r\n            <template #add>\r\n              <div class=\"buttons\">\r\n                <b-button\r\n                  icon-right=\"save\"\r\n                  type=\"is-primary\"\r\n                  class=\"is-icon-button\"\r\n                  size=\"is-small\"\r\n                  @click=\"$on_saveButtonClicked(index)\"\r\n                />\r\n              </div>\r\n            </template>\r\n          </test-sentence-editable>\r\n        </div>\r\n        <div class=\"is-flex is-justify-content-center\">\r\n          <b-button\r\n            v-if=\"!lastPage\"\r\n            type=\"is-primary-light\"\r\n            class=\"has-text-weight-bold\"\r\n            :loading=\"isLoadingSentences\"\r\n            @click=\"$on_loadButtonClicked\"\r\n            >Tải thêm</b-button\r\n          >\r\n        </div>\r\n      </div>\r\n    </admin-content>\r\n    <backtop type=\"is-primary-light\" outlined />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nimport { ToastNotifier } from \"../../../utils\";\r\nexport default {\r\n  name: \"TestManagementPage\",\r\n  components: {\r\n    backtop: () => import(\"@/components/backtop\"),\r\n    \"admin-content\": () =>\r\n      import(\"../components/admin-content/admin-content.vue\"),\r\n    \"test-sentence-editable\": () =>\r\n      import(\"../components/test-sentence/test-sentence-editable\"),\r\n    \"edit-test-form\": () => import(\"./edit-test-form\")\r\n  },\r\n  metaInfo() {\r\n    const title = `${this.test?.title} | Cập nhật bài test - ${this.$appConfig.VUE_APP_NAME}`;\r\n    return {\r\n      title\r\n    };\r\n  },\r\n  props: {\r\n    testId: String\r\n  },\r\n  data: () => ({\r\n    areSentencesValid: true,\r\n    sentences: [],\r\n    valids: [],\r\n    test: null,\r\n    page: 1,\r\n    lastPage: false,\r\n    updated: false,\r\n    isLoadingSentences: false\r\n  }),\r\n  mounted: function() {\r\n    this.$_getTestById();\r\n  },\r\n  methods: {\r\n    ...mapActions(\"TEST\", [\r\n      \"updateSentence\",\r\n      \"createSentence\",\r\n      \"deleteSentences\",\r\n      \"getTestById\"\r\n    ]),\r\n\r\n    $on_loadButtonClicked() {\r\n      this.$_getTestById();\r\n    },\r\n\r\n    $on_sentenceValidatedChanged(index, valid) {\r\n      this.valids[index] = valid;\r\n      if (\r\n        (valid && this.areSentencesValid) ||\r\n        (!valid && !this.areSentencesValid)\r\n      ) {\r\n        return;\r\n      }\r\n      this.areSentencesValid = this.valids.indexOf(false) === -1 ? true : false;\r\n    },\r\n\r\n    $on_saveButtonClicked(index) {\r\n      const sentence = this.sentences[index];\r\n      this.updateSentence({\r\n        test_id: this.test.test_id,\r\n        sentence_id: sentence.sentence_id,\r\n        data: sentence\r\n      }).then(result => {\r\n        const { error } = result;\r\n        if (error) {\r\n          return;\r\n        }\r\n        this.updated = false;\r\n        ToastNotifier.success(this.$buefy.toast, \"Cập nhật câu hỏi thành công\");\r\n      });\r\n    },\r\n\r\n    $_removeSentence(index, removeHandler) {\r\n      const sentence = this.sentences[index];\r\n      const { test_id, sentence_id } = sentence;\r\n      this.deleteSentences({\r\n        test_id,\r\n        sentencesIds: [sentence_id]\r\n      }).then(result => {\r\n        const { error } = result;\r\n        if (error) {\r\n          return;\r\n        }\r\n        this.updated = false;\r\n        removeHandler(index);\r\n      });\r\n    },\r\n\r\n    $_getTestById() {\r\n      this.isLoadingSentences = true;\r\n      this.getTestById({\r\n        test_id: this.testId,\r\n        page: this.page,\r\n        includeTest: this.page === 1\r\n      }).then(result => {\r\n        this.isLoadingSentences = false;\r\n        const { error, data } = result;\r\n        if (error) {\r\n          return;\r\n        }\r\n        const { test, results, page, page_count } = data;\r\n        this.test = test ?? this.test;\r\n        this.sentences.push(...results);\r\n        this.lastPage = page === page_count;\r\n        this.page++;\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./page.vue?vue&type=template&id=76bcceae&\"\nimport script from \"./page.vue?vue&type=script&lang=js&\"\nexport * from \"./page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}