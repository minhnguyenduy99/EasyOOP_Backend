(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50e42846"],{"21b2":function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("admin-content",{attrs:{title:"Duyệt bài viết",icon:"file-signature",iconPack:"fas","content-class":"p-0"}},[e("div",{attrs:{id:"page-main-content"}},[e("div",{attrs:{id:"list-pending-post-container"}},[e("div",{staticClass:"px-3 pt-5 pb-3"},[e("verification-search",{on:{search:t.$on_search}})],1),e("section",{staticClass:"px-3 py-5"},[e("verification-table",{attrs:{searchOptions:t.searchOptions},on:{selected:t.$on_verificationSelected}})],1)]),e("section",{staticClass:"card",attrs:{id:"verification-detail-section"}},[e("div",{staticClass:"card-content p-0"},[t.selectedVerification?e("b-tabs",{staticClass:"is-paddingless",attrs:{id:"post-detail-tabs",type:"is-toggle"},model:{value:t.activeTab,callback:function(i){t.activeTab=i},expression:"activeTab"}},[e("b-tab-item",{attrs:{label:"Duyệt"}},[t.loading?e("verification-detail-skeleton"):e("verification-detail",{attrs:{actionHeaderText:"Hành động khác",verification:t.selectedVerification},scopedSlots:t._u([{key:"custom-info",fn:function(t){var i=t.data;return[e("div",{staticClass:"px-3"},[e("b-field",{attrs:{label:"Tin nhắn","label-position":"inside"}},[e("b-input",{attrs:{value:i.message,placeholder:"Lời nhắn",type:"textarea",disabled:!0}})],1)],1)]}},{key:"actions",fn:function(){return[t.selectedVerification&&2===t.selectedVerification.status?e("div",[e("div",{staticClass:"verification-detail__header"},[e("span",[t._v("Duyệt bài viết")]),e("hr")]),e("div",{staticClass:"verification-detail__content"},[e("div",{staticClass:"is-flex is-flex-direction-column ha-vertical-layout-7"},[e("b-button",{attrs:{type:"is-primary",loading:t.verificationActionLoadings[0]},on:{click:t.$on_verifyPost}},[t._v("Duyệt bài viết")]),e("b-button",{attrs:{type:"is-danger",outlined:"",loading:t.verificationActionLoadings[1]},on:{click:t.$on_unverifyPost}},[t._v("Không duyệt")])],1)])]):t._e()]},proxy:!0}],null,!1,1524531073)})],1),e("b-tab-item",{attrs:{label:"Bài viết"}},[t.loading?e("verification-post-skeleton"):t.selectedDetailedPost.post_id?e("verification-post",{attrs:{post:t.selectedDetailedPost,editable:!1},on:{preview:function(i){t.showPostModal=!0}}}):e("div",{staticClass:"has-text-centered p-3"},[e("span",{staticClass:"has-text-grey is-size-5"},[t._v("Bài viết đã bị xóa")])])],1),e("b-tab-item",{attrs:{label:"Lịch sử duyệt"}},[t.loading?e("verification-history-skeleton",{attrs:{count:5}}):e("verification-history",{attrs:{verifications:t.historyVerifications}})],1)],1):e("div",{staticClass:"p-3 is-flex is-justify-content-center"},[e("span",{staticClass:"is-size-4 has-text-grey-light has-text-weight-medium"},[t._v("Bạn chưa chọn bài viết")])])],1)])])]),e("b-modal",{attrs:{scroll:"keep"},model:{value:t.showPostModal,callback:function(i){t.showPostModal=i},expression:"showPostModal"}},[e("div",{staticClass:"card is-page-responsive py-6"},[e("post-preview",{attrs:{useUrl:!0,contentUrl:t.selectedDetailedPost.content_file_url}})],1)])],1)},a=[],s=e("5530"),o=(e("d3b7"),e("3ca3"),e("ddb0"),e("2f62")),r=e("e607"),c=e("ed08"),l={name:"PostVerificationPage",components:{VerificationHistorySkeleton:r["b"],VerificationDetailSkeleton:r["a"],VerificationPostSkeleton:r["c"],"admin-content":function(){return e.e("chunk-193a4f2c").then(e.bind(null,"8e2f"))},"verification-table":function(){return e.e("chunk-3ac66150").then(e.bind(null,"b2ee"))},"verification-detail":function(){return Promise.all([e.e("chunk-2a303700"),e.e("chunk-932ac754"),e.e("chunk-210ea2fa"),e.e("chunk-072e95f0"),e.e("chunk-0d8dbb40")]).then(e.bind(null,"d84a"))},"verification-post":function(){return e.e("chunk-12382ebe").then(e.bind(null,"0125"))},"verification-history":function(){return e.e("chunk-2d238033").then(e.bind(null,"fe20"))},"verification-search":function(){return e.e("chunk-2d20e825").then(e.bind(null,"b056"))},"post-preview":function(){return e.e("chunk-072e95f0").then(e.bind(null,"4625"))}},metaInfo:function(){var t="Bài viết chờ duyệt - ".concat(this.$appConfig.VUE_APP_NAME);return{title:t}},data:function(){return{activeTab:-1,searchOptions:null,selectedVerification:null,showPostModal:!1,historyVerifications:[],loading:!1,verificationActionLoadings:[!1,!1]}},computed:{selectedDetailedPost:function(){var t,i;return null!==(t=null===(i=this.selectedVerification)||void 0===i?void 0:i.post)&&void 0!==t?t:{}}},watch:{activeTab:function(t){2===t&&this.$_requestPostHistory()}},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])("POST",["manager_getVerificationById","manager_getHistoryOfPost","manager_verify","manager_unverify"])),{},{$on_verificationSelected:function(t){var i=this;if(t){this.selectedVerification={},this.loading=!0;var e=t.verification_id;this.manager_getVerificationById({verification_id:e}).then((function(t){var e=t.error,n=t.data;e?i.loading=!1:(i.selectedVerification=n,2===i.activeTab?i.$_requestPostHistory():i.loading=!1)}))}else this.selectedVerification=null},$on_search:function(t){this.searchOptions=t},$on_verifyPost:function(){var t=this;this.selectedVerification&&this.$buefy.dialog.confirm({title:"Duyệt bài viết",message:"Bạn chắc chắc muốn duyệt bài viết ?",confirmText:"Đồng ý",cancelText:"Hủy bỏ",type:"is-primary",onConfirm:function(){t.verificationActionLoadings[0]=!0;var i=t.selectedVerification.verification_id;t.manager_verify({verification_id:i}).then((function(i){t.verificationActionLoadings[0]=!1;var e=i.error;e||(c["d"].success(t.$buefy.toast,"Bài viết đã được duyệt"),t.$_resetComponentData())}))}})},$on_unverifyPost:function(){var t=this;this.selectedVerification&&this.$buefy.dialog.confirm({title:"Không duyệt bài viết",message:"Bạn chắc chắc muốn từ chối duyệt bài viết ?</br>Bài viết sau khi bị hủy duyệt sẽ <strong class='has-text-danger'>MẤT HOÀN TOÀN</strong>",confirmText:"Đồng ý",cancelText:"Hủy bỏ",type:"is-danger",onConfirm:function(){t.verificationActionLoadings[1]=!0;var i=t.selectedVerification.verification_id;t.manager_unverify({verification_id:i}).then((function(i){t.verificationActionLoadings[1]=!1;var e=i.error;e||(c["d"].success(t.$buefy.toast,"Hủy duyệt bài viết thành công"),t.$_resetComponentData())}))}})},$_requestPostHistory:function(){var t=this,i=this.selectedVerification.post_id;i&&(this.loading=!0,this.historyVerifications.length=0,this.manager_getHistoryOfPost({post_id:i}).then((function(i){t.loading=!1;var e=i.error,n=i.data;e||(t.historyVerifications=n)})))},$_resetComponentData:function(){this.searchOptions={},this.selectedVerification=null,this.historyVerifications.length=0}})},d=l,u=(e("603e"),e("2877")),f=Object(u["a"])(d,n,a,!1,null,"b5b21082",null);i["default"]=f.exports},2909:function(t,i,e){"use strict";e.d(i,"a",(function(){return c}));var n=e("6b75");function a(t){if(Array.isArray(t))return Object(n["a"])(t)}e("a4d3"),e("e01a"),e("d3b7"),e("d28b"),e("3ca3"),e("ddb0"),e("a630");function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=e("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||s(t)||Object(o["a"])(t)||r()}},"603e":function(t,i,e){"use strict";e("b0e7")},b0e7:function(t,i,e){},e607:function(t,i,e){"use strict";e.d(i,"b",(function(){return l})),e.d(i,"a",(function(){return b})),e.d(i,"c",(function(){return _}));var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",t._l(t.count,(function(t){return e("div",{key:t,staticClass:"is-fullwidth p-3 is-flex is-justify-content-space-between is-align-items-center"},[e("div",[e("b-skeleton",{attrs:{width:"150px"}}),e("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),e("div",[e("b-skeleton",{attrs:{width:"30px",height:"30px",rounded:""}})],1)])})),0)},a=[],s=(e("a9e3"),{name:"VerificationHistorySkeleton",props:{count:{type:Number,default:function(){return 0}}}}),o=s,r=e("2877"),c=Object(r["a"])(o,n,a,!1,null,null,null),l=c.exports,d=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"ha-vertical-layout-6 p-3"},[e("div",[e("b-skeleton",{attrs:{width:"100px"}}),e("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),e("div",[e("b-skeleton",{attrs:{width:"150px"}}),e("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),e("div",[e("b-skeleton",{attrs:{width:"80px"}}),e("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),e("div",[e("b-skeleton",{attrs:{width:"150px"}}),e("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),e("div",[e("b-skeleton",{attrs:{width:"150px"}}),e("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),e("div",[e("b-skeleton",{attrs:{width:"150px"}}),e("b-skeleton",{attrs:{rounded:"",width:"60px"}})],1),e("div",[e("b-skeleton",{attrs:{width:"100%",height:"20px"}}),e("b-skeleton",{attrs:{width:"80px"}}),e("b-skeleton",{attrs:{width:"100%",height:"120px"}})],1)])},u=[],f={name:"VerificationDetailSkeleton"},h=f,v=Object(r["a"])(h,d,u,!1,null,null,null),b=v.exports,p=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"ha-vertical-layout-7"},[e("b-skeleton",{attrs:{width:"100%",height:"200px"}}),e("div",{staticClass:"p-3 ha-vertical-layout-6"},[e("b-skeleton",{attrs:{width:"100%",height:"30px"}}),e("div",[e("b-skeleton",{attrs:{width:"100px"}}),e("b-skeleton",{attrs:{width:"100%"}})],1),e("div",[e("b-skeleton",{attrs:{width:"100px"}}),e("b-skeleton",{attrs:{width:"100%"}})],1),e("div",[e("b-skeleton",{attrs:{width:"100px"}}),e("div",{staticClass:"is-flex is-align-items-center is-justify-content-flex-start"},[e("div",{staticClass:"mr-2"},[e("b-skeleton",{attrs:{width:"50"}})],1),e("div",{staticClass:"mr-2"},[e("b-skeleton",{attrs:{width:"50"}})],1),e("div",[e("b-skeleton",{attrs:{width:"50"}})],1)])],1),e("div",[e("b-skeleton",{attrs:{width:"100px"}}),e("b-skeleton",{attrs:{width:"100%"}})],1)],1)],1)},y=[],g={name:"VerificationPost"},k=g,m=Object(r["a"])(k,p,y,!1,null,null,null),_=m.exports}}]);
//# sourceMappingURL=chunk-50e42846.1194e82e.js.map