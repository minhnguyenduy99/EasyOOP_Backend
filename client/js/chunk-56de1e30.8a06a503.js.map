{"version":3,"sources":["webpack:///./src/views/admin/qanda/qanda-table.vue?584e","webpack:///src/views/admin/qanda/qanda-table.vue","webpack:///./src/views/admin/qanda/qanda-table.vue?e143","webpack:///./src/views/admin/qanda/qanda-table.vue?8e13","webpack:///./src/views/admin/qanda/qanda-table.vue?e432"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","ref","questions","selectedQuestion","row","loading","itemsPerPage","totalCount","index","on","$event","$on_pageChanged","$on_rowClicked","scopedSlots","_u","key","fn","props","_v","_s","answer","staticClass","_l","feature","id","tooltip","type","icon","outlined","stopPropagation","featureHandler","proxy","question","tag_value","model","value","callback","$$v","showModal","expression","$on_formSubmitted","staticRenderFns","name","components","searchOptions","Object","inject","data","created","push","$on_editButtonClicked","$_loadAsyncData","computed","selectedQuestionId","isRowSelected","_table","$refs","table","watch","methods","closeDetailRow","openDetailRow","page","success","$nextTick","$_updateData","total_count","length","$_resetTableState","$_removeQuestionFromTable","filter","component"],"mappings":"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","file":"js/chunk-56de1e30.8a06a503.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"common-question-table\"}},[_c('b-table',{ref:\"table\",attrs:{\"data\":_vm.questions,\"paginated\":\"\",\"hoverable\":\"\",\"pagination-rounded\":\"\",\"selected\":_vm.selectedQuestion,\"detailed\":\"\",\"anima\":\"\",\"detail-key\":\"id\",\"has-detailed-visible\":function (row) { return false; },\"show-detail-icon\":false,\"loading\":_vm.loading,\"pagination-size\":\"is-small\",\"per-page\":_vm.itemsPerPage,\"total\":_vm.totalCount,\"backend-pagination\":\"\",\"row-class\":function (row, index) { return 'is-clickable'; }},on:{\"update:selected\":function($event){_vm.selectedQuestion=$event},\"page-change\":_vm.$on_pageChanged,\"click\":_vm.$on_rowClicked},scopedSlots:_vm._u([{key:\"detail\",fn:function(props){return [_c('h1',[_vm._v(\" \"+_vm._s(props.row.answer)+\" \")]),_c('hr'),_c('section',{staticClass:\"tooltip-section\"},_vm._l((_vm.features),function(feature,index){return _c('b-tooltip',{key:feature.id,attrs:{\"position\":\"is-left\",\"label\":feature.tooltip,\"type\":feature.type}},[_c('b-button',{staticClass:\"is-icon-button\",attrs:{\"size\":\"is-small\",\"icon-left\":feature.icon,\"type\":feature.type,\"outlined\":feature.outlined},on:{\"click\":function($event){$event.stopPropagation();return _vm.featureHandler[index](props.row)}}})],1)}),1)]}},{key:\"empty\",fn:function(){return [_c('empty-state',{attrs:{\"image-src\":\"#\",\"text\":\"Chưa có câu hỏi nào\"}})]},proxy:true},{key:\"footer\",fn:function(){return [_c('div',[_c('span',{staticClass:\"has-text-grey\"},[_vm._v(\"Số lượng kết quả: \")]),_c('span',{staticClass:\"has-text-weight-bold\"},[_vm._v(_vm._s(_vm.totalCount))])])]},proxy:true}])},[_c('b-table-column',{attrs:{\"label\":\"ID\",\"numeric\":\"\",\"width\":\"20\",\"centered\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('strong',[_vm._v(_vm._s(row.id))])]}}])}),_c('b-table-column',{attrs:{\"label\":\"Câu hỏi\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(row.question)+\" \")]}}])}),_c('b-table-column',{attrs:{\"label\":\"Nhãn dán\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.tag_id)?_c('b-tag',{attrs:{\"type\":\"is-primary-dark\"}},[_c('span',{staticClass:\"has-text-weight-bold\"},[_vm._v(_vm._s(row.tag_value))])]):_c('span',{staticClass:\"has-text-grey\"},[_vm._v(\"Chưa có nhãn\")])]}}])})],1),_c('b-modal',{attrs:{\"has-modal-card\":\"\"},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_c('edit-question-form',{attrs:{\"question\":_vm.selectedQuestion},on:{\"submitted\":_vm.$on_formSubmitted}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"common-question-table\">\r\n    <b-table\r\n      :data=\"questions\"\r\n      paginated\r\n      hoverable\r\n      pagination-rounded\r\n      :selected.sync=\"selectedQuestion\"\r\n      detailed\r\n      anima\r\n      detail-key=\"id\"\r\n      :has-detailed-visible=\"row => false\"\r\n      :show-detail-icon=\"false\"\r\n      :loading=\"loading\"\r\n      pagination-size=\"is-small\"\r\n      :per-page=\"itemsPerPage\"\r\n      :total=\"totalCount\"\r\n      backend-pagination\r\n      :row-class=\"(row, index) => 'is-clickable'\"\r\n      @page-change=\"$on_pageChanged\"\r\n      @click=\"$on_rowClicked\"\r\n      ref=\"table\"\r\n    >\r\n      <b-table-column label=\"ID\" numeric width=\"20\" centered>\r\n        <template v-slot=\"{ row }\">\r\n          <strong>{{ row.id }}</strong>\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column label=\"Câu hỏi\" v-slot=\"{ row }\">\r\n        {{ row.question }}\r\n      </b-table-column>\r\n\r\n      <b-table-column label=\"Nhãn dán\" width=\"200\">\r\n        <template v-slot=\"{ row }\">\r\n          <b-tag v-if=\"row.tag_id\" type=\"is-primary-dark\">\r\n            <span class=\"has-text-weight-bold\">{{ row.tag_value }}</span>\r\n          </b-tag>\r\n          <span class=\"has-text-grey\" v-else>Chưa có nhãn</span>\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <template #detail=\"props\">\r\n        <h1>\r\n          {{ props.row.answer }}\r\n        </h1>\r\n        <hr />\r\n        <section class=\"tooltip-section\">\r\n          <b-tooltip\r\n            v-for=\"(feature, index) in features\"\r\n            position=\"is-left\"\r\n            :key=\"feature.id\"\r\n            :label=\"feature.tooltip\"\r\n            :type=\"feature.type\"\r\n          >\r\n            <b-button\r\n              class=\"is-icon-button\"\r\n              size=\"is-small\"\r\n              :icon-left=\"feature.icon\"\r\n              :type=\"feature.type\"\r\n              :outlined=\"feature.outlined\"\r\n              @click.stop=\"featureHandler[index](props.row)\"\r\n            />\r\n          </b-tooltip>\r\n        </section>\r\n      </template>\r\n      <template #empty>\r\n        <empty-state image-src=\"#\" text=\"Chưa có câu hỏi nào\" />\r\n      </template>\r\n      <template #footer>\r\n        <div>\r\n          <span class=\"has-text-grey\">Số lượng kết quả: </span>\r\n          <span class=\"has-text-weight-bold\">{{ totalCount }}</span>\r\n        </div>\r\n      </template>\r\n    </b-table>\r\n\r\n    <b-modal v-model=\"showModal\" has-modal-card>\r\n      <edit-question-form\r\n        :question=\"selectedQuestion\"\r\n        @submitted=\"$on_formSubmitted\"\r\n      />\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nexport default {\r\n  name: \"QandATable\",\r\n  components: {\r\n    \"edit-question-form\": () => import(\"./edit-question.form\"),\r\n    \"empty-state\": () => import(\"@/components/empty-state.vue\")\r\n  },\r\n  props: {\r\n    searchOptions: Object\r\n  },\r\n  inject: [\"$api_findQuestions\"],\r\n  data: () => ({\r\n    itemsPerPage: 6,\r\n    totalCount: 0,\r\n    questions: [],\r\n    selectedQuestion: null,\r\n    features: [\r\n      {\r\n        icon: \"pen\",\r\n        tooltip: \"Chỉnh sửa câu hỏi\",\r\n        type: \"is-primary\",\r\n        outlined: true\r\n      }\r\n    ],\r\n    page: 1,\r\n    featureHandler: [],\r\n    showModal: false,\r\n    loading: false,\r\n    openedDetailedRows: []\r\n  }),\r\n  created: function() {\r\n    this.featureHandler.push(this.$on_editButtonClicked);\r\n    this.$_loadAsyncData();\r\n  },\r\n  computed: {\r\n    selectedQuestionId() {\r\n      return this.selectedQuestion?.id;\r\n    },\r\n    isRowSelected() {\r\n      return this.selectedQuestion !== null;\r\n    },\r\n    _table() {\r\n      return this.$refs.table;\r\n    }\r\n  },\r\n  watch: {\r\n    questions: function() {\r\n      this.selectedQuestion = null;\r\n    },\r\n    searchOptions() {\r\n      this.$_loadAsyncData();\r\n    }\r\n  },\r\n  methods: {\r\n    $on_rowClicked(row) {\r\n      this._table.closeDetailRow(row);\r\n      if (this.selectedQuestionId === row.id) {\r\n        this.selectedQuestion = null;\r\n        return;\r\n      }\r\n      this._table.openDetailRow(row);\r\n    },\r\n    $on_pageChanged(page) {\r\n      this.page = page;\r\n      this.$_loadAsyncData();\r\n    },\r\n    $on_formSubmitted(result) {\r\n      const { success } = result;\r\n      if (!success) {\r\n        return;\r\n      }\r\n      this.showModal = false;\r\n      this.$nextTick(() => {\r\n        this.$_loadAsyncData();\r\n      });\r\n    },\r\n    async $_loadAsyncData() {\r\n      this.loading = true;\r\n      this.$api_findQuestions({\r\n        page: this.page,\r\n        ...this.searchOptions\r\n      }).then(result => {\r\n        const { error, data } = result;\r\n        this.loading = this._searching = false;\r\n        this.$_resetTableState();\r\n        if (error) {\r\n          return;\r\n        }\r\n        this.$_updateData(data);\r\n      });\r\n    },\r\n    $_updateData(data) {\r\n      const { total_count, results } = data;\r\n      this.totalCount = total_count;\r\n      this.questions.length = 0;\r\n      this.questions.push(\r\n        ...results.map((result, index) => {\r\n          result.id = index + 1;\r\n          return result;\r\n        })\r\n      );\r\n    },\r\n    $on_editButtonClicked() {\r\n      this.showModal = true;\r\n    },\r\n    $_resetTableState() {\r\n      if (this.selectedQuestion) {\r\n        this._table.closeDetailRow(this.selectedQuestion);\r\n      }\r\n      this.selectedQuestion = null;\r\n    },\r\n    $_removeQuestionFromTable(questionId) {\r\n      this.questions = this.questions.filter(q => q.qa_id !== questionId);\r\n      this.totalCount--;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.custom-table-header {\r\n  border-top: none;\r\n  border-left: none;\r\n  border-right: none;\r\n}\r\n\r\n.b-table {\r\n  td.chevron-cell {\r\n    width: 50px;\r\n  }\r\n}\r\n\r\n.custom-row-class {\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.tooltip-section {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  .b-tooltip {\r\n    margin-bottom: 0.5rem;\r\n\r\n    &:not(:last-child) {\r\n      margin-right: 0.5rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./qanda-table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./qanda-table.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./qanda-table.vue?vue&type=template&id=da4c9350&scoped=true&\"\nimport script from \"./qanda-table.vue?vue&type=script&lang=js&\"\nexport * from \"./qanda-table.vue?vue&type=script&lang=js&\"\nimport style0 from \"./qanda-table.vue?vue&type=style&index=0&id=da4c9350&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"da4c9350\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./qanda-table.vue?vue&type=style&index=0&id=da4c9350&scoped=true&lang=scss&\""],"sourceRoot":""}