{"version":3,"sources":["webpack:///./src/views/admin/post-verification/consts.js","webpack:///./src/views/admin/post-verification/verification-table.vue?7aca","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/views/admin/post-verification/verification-table.vue?aa0f","webpack:///src/views/admin/post-verification/verification-table.vue","webpack:///./src/views/admin/post-verification/verification-table.vue?d99f","webpack:///./src/views/admin/post-verification/verification-table.vue?d184"],"names":["POST_STATUSES","status","title","icon","type","VERIFICATION_TYPES","text","value","VERIFICATION_STATUSES","color","_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","Object","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","render","_vm","this","_h","$createElement","_c","_self","attrs","verifications","isTableEmpty","selectedVerification","loading","itemsPerPage","totalCount","row","index","on","$event","$on_pageChanged","$on_sort","$on_rowClicked","scopedSlots","_u","key","fn","proxy","staticClass","_v","_s","ref","id","post_title","Date","created_date","toLocaleDateString","isRowSelected","filteredActions","length","staticStyle","_l","action","tooltip","outlined","stopPropagation","actionHandler","staticRenderFns","name","components","props","Number","searchOptions","default","active","Boolean","inject","data","statuses","created","push","mounted","$_loadAsyncData","computed","selectedVerificationId","selectedApi","manager_getPendingVerifications","manager_findVerifications","ACTIONS","filter","watch","val","$emit","page","methods","verification_id","sorter","field","sort_order","order","limit","search","then","error","$_updateData","total_count","$_isActionsGroupShown","$on_viewButtonClicked","previewSelectedPost","$on_verifyButtonClicked","$buefy","dialog","confirm","message","confirmText","cancelText","onConfirm","$on_unverifyButtonClicked","$_removeVerificationFromTable","component"],"mappings":"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","file":"js/chunk-f59cc848.edd34200.js","sourcesContent":["export const POST_STATUSES = [\r\n  {\r\n    status: -1,\r\n    title: \"Chọn tất cả\"\r\n  },\r\n  {\r\n    status: 1,\r\n    title: \"Duyệt tạo\",\r\n    icon: \"circle\",\r\n    type: \"is-danger\"\r\n  },\r\n  {\r\n    status: 2,\r\n    title: \"Duyệt cập nhật\",\r\n    icon: \"circle\",\r\n    type: \"is-danger\"\r\n  },\r\n  {\r\n    status: 3,\r\n    title: \"Duyệt xóa\",\r\n    icon: \"circle\",\r\n    type: \"is-danger\"\r\n  }\r\n];\r\n\r\nexport const VERIFICATION_TYPES = [\r\n  {\r\n    text: \"Chọn loại duyệt\",\r\n    value: null\r\n  },\r\n  {\r\n    text: \"Duyệt tạo\",\r\n    value: \"1\"\r\n  },\r\n  {\r\n    text: \"Duyệt cập nhật\",\r\n    value: \"2\"\r\n  },\r\n  {\r\n    text: \"Duyệt xóa\",\r\n    value: \"3\"\r\n  }\r\n];\r\n\r\nexport const VERIFICATION_STATUSES = [\r\n  {\r\n    text: \"Không được duyệt\",\r\n    color: \"has-text-danger\"\r\n  },\r\n  {\r\n    text: \"Đã duyệt\",\r\n    color: \"has-text-success\"\r\n  },\r\n  {\r\n    text: \"Đang chờ\",\r\n    color: \"has-text-primary-dark\"\r\n  },\r\n  {\r\n    text: \"Đã hủy\",\r\n    color: \"has-text-grey\"\r\n  }\r\n];\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./verification-table.vue?vue&type=style&index=0&id=9d5c1ac0&scoped=true&lang=scss&\"","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"dashboard-post-table\"}},[_c('b-table',{attrs:{\"data\":_vm.verifications,\"paginated\":!_vm.isTableEmpty,\"hoverable\":\"\",\"pagination-rounded\":\"\",\"selected\":_vm.selectedVerification,\"is-row-selectable\":function () { return true; },\"loading\":_vm.loading,\"pagination-size\":\"is-small\",\"per-page\":_vm.itemsPerPage,\"total\":_vm.totalCount,\"backend-pagination\":\"\",\"row-class\":function (row, index) { return 'is-clickable'; },\"backend-sorting\":\"\"},on:{\"update:selected\":function($event){_vm.selectedVerification=$event},\"page-change\":_vm.$on_pageChanged,\"sort\":_vm.$on_sort,\"click\":_vm.$on_rowClicked},scopedSlots:_vm._u([{key:\"empty\",fn:function(){return [_c('empty-state',{attrs:{\"image-src\":\"https://res.cloudinary.com/dml8e1w0z/image/upload/v1618931250/oop-learning-helper/post_empty_state_xcrbog.png\",\"text\":\"Bạn không có bài duyệt nào\"}})]},proxy:true},(!_vm.isTableEmpty)?{key:\"footer\",fn:function(){return [_c('div',[_c('span',{staticClass:\"has-text-grey\"},[_vm._v(\"Số lượng kết quả: \")]),_c('span',{staticClass:\"has-text-weight-bold\"},[_vm._v(_vm._s(_vm.totalCount))])])]},proxy:true}:null],null,true)},[_c('b-table-column',{attrs:{\"label\":\"ID\",\"width\":\"40\",\"numeric\":\"\",\"centered\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('strong',[_vm._v(_vm._s(row.id))])]}}])}),_c('b-table-column',{attrs:{\"label\":\"Tên bài viết\",\"width\":\"300\",\"cell-class\":\"is-align-items-center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(row.post_title)+\" \")]}}])}),_c('b-table-column',{attrs:{\"label\":\"Loại duyệt\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [[_c('b-tag',{attrs:{\"size\":\"is-small\",\"type\":\"is-primary-dark\"}},[_vm._v(\" \"+_vm._s(_vm.VERIFICATION_TYPES[row.type].text)+\" \")])]]}}])}),_c('b-table-column',{attrs:{\"field\":\"created_date\",\"label\":\"Ngày tạo\",\"width\":\"100\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(new Date(row.created_date).toLocaleDateString(\"en-GB\"))+\" \")]}}])}),_c('b-table-column',{attrs:{\"visible\":_vm.isRowSelected && _vm.filteredActions.length > 0,\"label\":\"\",\"width\":\"auto\"}},[[_c('section',{staticClass:\"tooltip-section\",staticStyle:{\"margin-top\":\"-4px\",\"margin-bottom\":\"-6px\"}},_vm._l((_vm.filteredActions),function(action,index){return _c('b-tooltip',{key:action.id,attrs:{\"label\":action.tooltip,\"type\":action.type}},[_c('b-button',{staticClass:\"is-icon-button\",attrs:{\"size\":\"is-small\",\"rounded\":\"\",\"icon-left\":action.icon,\"type\":action.type,\"outlined\":action.outlined},on:{\"click\":function($event){$event.stopPropagation();return _vm.actionHandler[index]($event)}}})],1)}),1)]],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"dashboard-post-table\">\r\n    <b-table\r\n      :data=\"verifications\"\r\n      :paginated=\"!isTableEmpty\"\r\n      hoverable\r\n      pagination-rounded\r\n      :selected.sync=\"selectedVerification\"\r\n      :is-row-selectable=\"() => true\"\r\n      :loading=\"loading\"\r\n      pagination-size=\"is-small\"\r\n      :per-page=\"itemsPerPage\"\r\n      :total=\"totalCount\"\r\n      backend-pagination\r\n      :row-class=\"(row, index) => 'is-clickable'\"\r\n      backend-sorting\r\n      @page-change=\"$on_pageChanged\"\r\n      @sort=\"$on_sort\"\r\n      @click=\"$on_rowClicked\"\r\n    >\r\n      <b-table-column label=\"ID\" width=\"40\" numeric centered>\r\n        <template v-slot=\"{ row }\">\r\n          <strong>{{ row.id }}</strong>\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column\r\n        label=\"Tên bài viết\"\r\n        width=\"300\"\r\n        v-slot=\"{ row }\"\r\n        cell-class=\"is-align-items-center\"\r\n      >\r\n        {{ row.post_title }}\r\n      </b-table-column>\r\n\r\n      <b-table-column label=\"Loại duyệt\" width=\"200\" v-slot=\"{ row }\">\r\n        <template>\r\n          <b-tag size=\"is-small\" type=\"is-primary-dark\">\r\n            {{ VERIFICATION_TYPES[row.type].text }}\r\n          </b-tag>\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column\r\n        field=\"created_date\"\r\n        label=\"Ngày tạo\"\r\n        width=\"100\"\r\n        v-slot=\"{ row }\"\r\n        sortable\r\n      >\r\n        {{ new Date(row.created_date).toLocaleDateString(\"en-GB\") }}\r\n      </b-table-column>\r\n\r\n      <b-table-column\r\n        :visible=\"isRowSelected && filteredActions.length > 0\"\r\n        label=\"\"\r\n        width=\"auto\"\r\n      >\r\n        <template>\r\n          <section\r\n            class=\"tooltip-section\"\r\n            style=\"margin-top: -4px; margin-bottom: -6px\"\r\n          >\r\n            <b-tooltip\r\n              v-for=\"(action, index) in filteredActions\"\r\n              :key=\"action.id\"\r\n              :label=\"action.tooltip\"\r\n              :type=\"action.type\"\r\n            >\r\n              <b-button\r\n                class=\"is-icon-button\"\r\n                size=\"is-small\"\r\n                rounded\r\n                :icon-left=\"action.icon\"\r\n                :type=\"action.type\"\r\n                :outlined=\"action.outlined\"\r\n                @click.stop=\"actionHandler[index]\"\r\n              />\r\n            </b-tooltip>\r\n          </section>\r\n        </template>\r\n      </b-table-column>\r\n      <template #empty>\r\n        <empty-state\r\n          image-src=\"https://res.cloudinary.com/dml8e1w0z/image/upload/v1618931250/oop-learning-helper/post_empty_state_xcrbog.png\"\r\n          text=\"Bạn không có bài duyệt nào\"\r\n        />\r\n      </template>\r\n      <template v-if=\"!isTableEmpty\" #footer>\r\n        <div>\r\n          <span class=\"has-text-grey\">Số lượng kết quả: </span>\r\n          <span class=\"has-text-weight-bold\">{{ totalCount }}</span>\r\n        </div>\r\n      </template>\r\n    </b-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { VERIFICATION_TYPES } from \"./consts\";\r\n\r\nexport default {\r\n  name: \"PostTable\",\r\n  components: {\r\n    \"empty-state\": () => import(\"@/components/empty-state.vue\")\r\n  },\r\n  props: {\r\n    type: Number,\r\n    searchOptions: {\r\n      type: Object,\r\n      default: () => {}\r\n    },\r\n    active: {\r\n      type: Boolean,\r\n      default: () => false\r\n    }\r\n  },\r\n  inject: [\r\n    \"manager_getPendingVerifications\",\r\n    \"manager_findVerifications\",\r\n    \"manager_verify\",\r\n    \"manager_unverify\",\r\n    \"previewSelectedPost\"\r\n  ],\r\n  data: () => ({\r\n    ACTIONS: [\r\n      {\r\n        icon: \"eye\",\r\n        tooltip: \"Xem trước\",\r\n        type: \"is-primary\",\r\n        outlined: true,\r\n        statuses: [1, 2]\r\n      },\r\n      {\r\n        icon: \"check\",\r\n        tooltip: \"Duyệt\",\r\n        type: \"is-success\",\r\n        outlined: false,\r\n        statuses: [2]\r\n      },\r\n      {\r\n        icon: \"ban\",\r\n        tooltip: \"Không duyệt\",\r\n        type: \"is-danger\",\r\n        outlined: false,\r\n        statuses: [2]\r\n      }\r\n    ],\r\n    verifications: [],\r\n    VERIFICATION_TYPES: [],\r\n    itemsPerPage: 6,\r\n    totalCount: 0,\r\n    page: 1,\r\n    sorter: {\r\n      sort_by: \"time\",\r\n      order: -1\r\n    },\r\n    actionHandler: [],\r\n    selectedVerification: null,\r\n    loading: false\r\n  }),\r\n  created: function() {\r\n    this.actionHandler.push(\r\n      this.$on_viewButtonClicked,\r\n      this.$on_verifyButtonClicked,\r\n      this.$on_unverifyButtonClicked\r\n    );\r\n    this.VERIFICATION_TYPES = VERIFICATION_TYPES;\r\n  },\r\n  mounted: function() {\r\n    this.$_loadAsyncData();\r\n  },\r\n  computed: {\r\n    selectedVerificationId() {\r\n      return this.selectedVerification?.verification_id;\r\n    },\r\n    isRowSelected() {\r\n      return this.selectedVerification !== null;\r\n    },\r\n    selectedApi() {\r\n      if (this.type === 2) {\r\n        return this.manager_getPendingVerifications;\r\n      }\r\n      return this.manager_findVerifications;\r\n    },\r\n    filteredActions() {\r\n      return this.ACTIONS.filter(action => action.statuses.includes(this.type));\r\n    },\r\n    isTableEmpty() {\r\n      return this.verifications.length === 0;\r\n    }\r\n  },\r\n  watch: {\r\n    active(val) {\r\n      if (val) {\r\n        return;\r\n      }\r\n      this.selectedVerification = null;\r\n    },\r\n    selectedVerification(val) {\r\n      this.$emit(\"selected\", val);\r\n    },\r\n    verifications: function() {\r\n      this.selectedVerification = null;\r\n    },\r\n    searchOptions(val) {\r\n      this.page = 1;\r\n      this.$_loadAsyncData(val);\r\n    }\r\n  },\r\n  methods: {\r\n    $on_rowClicked(row) {\r\n      if (row.verification_id === this.selectedVerificationId) {\r\n        this.selectedVerification = null;\r\n      }\r\n    },\r\n    $on_pageChanged(page) {\r\n      this.page = page;\r\n      this.$_loadAsyncData();\r\n    },\r\n    $on_sort(field, order) {\r\n      this.sorter[\"sort_by\"] = field;\r\n      this.sorter.sort_order = order;\r\n      this.$_loadAsyncData();\r\n    },\r\n    $_loadAsyncData() {\r\n      let search = {\r\n        ...this.searchOptions,\r\n        ...this.sorter,\r\n        status: this.type,\r\n        page: this.page,\r\n        limit: this.itemsPerPage\r\n      };\r\n      this.selectedApi(search).then(result => {\r\n        const { error, data } = result;\r\n        if (error) {\r\n          return;\r\n        }\r\n        this.$_updateData(data);\r\n      });\r\n    },\r\n    $_updateData(data) {\r\n      const { total_count, results } = data;\r\n      this.totalCount = total_count;\r\n      this.verifications.length = 0;\r\n      this.verifications.push(\r\n        ...results.map((result, index) => {\r\n          result.id = index + 1;\r\n          return result;\r\n        })\r\n      );\r\n    },\r\n    $_isActionsGroupShown(row) {\r\n      return (\r\n        this.selectedVerificationId === row.verification_id &&\r\n        this.filteredActions.length > 0\r\n      );\r\n    },\r\n    $on_viewButtonClicked() {\r\n      this.previewSelectedPost();\r\n    },\r\n    $on_verifyButtonClicked() {\r\n      this.$buefy.dialog.confirm({\r\n        title: \"Duyệt bài viết\",\r\n        message: \"Bạn chắc chắn muốn duyệt bài viết ?\",\r\n        confirmText: \"Đồng ý\",\r\n        cancelText: \"Hủy bỏ\",\r\n        type: \"is-success\",\r\n        onConfirm: () => {\r\n          this.manager_verify({\r\n            verification_id: this.selectedVerificationId\r\n          }).then(result => {\r\n            const { error } = result;\r\n            if (error) {\r\n              return;\r\n            }\r\n            this.$_removeVerificationFromTable(this.selectedVerificationId);\r\n          });\r\n        }\r\n      });\r\n    },\r\n    $on_unverifyButtonClicked() {\r\n      this.$buefy.dialog.confirm({\r\n        title: \"Hủy duyệt bài viết\",\r\n        message: \"Bạn chắc chắn muốn hủy duyệt bài viết này?\",\r\n        confirmText: \"Đồng ý\",\r\n        cancelText: \"Hủy bỏ\",\r\n        type: \"is-danger\",\r\n        onConfirm: () => {\r\n          this.manager_unverify({\r\n            verification_id: this.selectedVerificationId\r\n          }).then(result => {\r\n            const { error } = result;\r\n            if (error) {\r\n              return;\r\n            }\r\n            this.$_removeVerificationFromTable(this.selectedVerificationId);\r\n          });\r\n        }\r\n      });\r\n    },\r\n    $_removeVerificationFromTable(verificationId) {\r\n      this.verifications = this.verifications.filter(\r\n        ver => ver.verification_id !== verificationId\r\n      );\r\n      this.totalCount--;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.custom-table-header {\r\n  border-top: none;\r\n  border-left: none;\r\n  border-right: none;\r\n}\r\n\r\n.b-table {\r\n  tr {\r\n    th.checkbox-cell {\r\n      background: $grey-lighter;\r\n    }\r\n  }\r\n}\r\n\r\n.custom-row-class {\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.tooltip-section {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  .b-tooltip {\r\n    margin-bottom: 0.5rem;\r\n\r\n    &:not(:last-child) {\r\n      margin-right: 0.5rem;\r\n    }\r\n  }\r\n}\r\n\r\n.is-vertical-middle {\r\n  vertical-align: middle;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./verification-table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./verification-table.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./verification-table.vue?vue&type=template&id=9d5c1ac0&scoped=true&\"\nimport script from \"./verification-table.vue?vue&type=script&lang=js&\"\nexport * from \"./verification-table.vue?vue&type=script&lang=js&\"\nimport style0 from \"./verification-table.vue?vue&type=style&index=0&id=9d5c1ac0&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9d5c1ac0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}